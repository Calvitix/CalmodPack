# Original File
#
# Calvitix Check 3.0.3  21/05/2021
#
# Merge with Planetary Diversity 21/05/2021
# Merge with GPM 24/04/2021
# Merge with STARNET AI   07/06/2021
# Merge with Megacordp mod 21/05/2021
#
#root = planet

@small_planet_threshold = 18
@free_districts_verylow_threshold = 3
@free_districts_low_threshold = 5
@free_districts_medium_threshold = 10
@free_districts_high_threshold = 15
@built_districts_low_threshold = 3
@built_districts_medium_threshold = 4
@built_districts_high_threshold = 8

# Colony
col_default = {
	icon = 11

	potential = {
		exists = owner
		owner = { is_regular_empire = yes }
		has_upgraded_capital = no
		is_special_colony_type = no
		num_pops < 5
	}

	planet_modifier = {
		planet_stability_add = 5
		planet_amenities_add = 10
		pop_happiness = 0.10
	}

	weight_modifier = {
		base = 10
		modifier = {
			factor = 100
			owner = { is_ai = yes }
		}
	}
}

# Colony Machine
col_default_machine = {
	icon = 11

	potential = {
		exists = owner
		owner = { is_machine_empire = yes }
		has_upgraded_capital = no
		is_special_colony_type = no
		num_pops < 5
	}

	planet_modifier = {
		planet_stability_add = 5
		planet_amenities_no_happiness_add = 10
	}

	weight_modifier = {
		base = 10
		modifier = {
			factor = 100
			owner = { is_ai = yes }
		}
	}
}

# Urban Planet
col_city = {
	icon = 1

	potential = {
		exists = owner
		owner = { is_regular_empire = yes }
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
#PD
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
##
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_districts_cities_cost_mult = -0.10
		planet_districts_industrial_cost_mult = -0.10
		planet_district_city_build_speed_mult = 0.25
		trade_value_mult = 0.20
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value >= @free_districts_medium_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value >= @free_districts_high_threshold }
		}
		modifier = {
			add = 2
			has_designation = col_city
		}
		modifier = {
			add = 5
			has_modifier = natural_beauty
		}
		modifier = {
			add = 5
			num_districts = { type = district_city value >= @built_districts_high_threshold }
		}
		modifier = {
			factor = 0.1
			num_districts = { type = district_city value < @built_districts_low_threshold }
		}
	}
}

# Mining Planet
col_mining = {
	icon = 2

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_district_mining_build_speed_mult = 0.25
		planet_miners_produces_mult = 0.25
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_mining value > @free_districts_low_threshold }
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_mining value > @free_districts_medium_threshold }
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 2
			has_designation = col_mining
		}
		modifier = {
			# add = 5
			add = 10
			OR = {
				has_modifier = asteroid_belt
				has_modifier = mineral_rich
				has_modifier = ultra_rich
				has_modifier = extensive_moon_system
				has_modifier = gpm_strong_volcanism
				has_modifier = gpm_asteroid_impacts_2
				has_modifier = gpm_mineral_rich_2
				has_modifier = gpm_ultra_rich_2
				has_modifier = gpm_extensive_cavern_system
				has_modifier = gpm_rugged_terrain
				has_modifier = gpm_colossal_cliffs
				has_modifier = gpm_titanic_geo_form
				has_modifier = asteroid_impacts
			}
		}
		modifier = {
			add = 3
			OR = {
				has_modifier = asteroid_belt
				has_modifier = mineral_rich
				has_modifier = ultra_rich
				has_modifier = extensive_moon_system
				has_modifier = asteroid_impacts
			}
		}
		modifier = {
			# add = 5
			add = 40
			has_modifier = gpm_precursor_mines
		}
###STARNET AI
		modifier = {
			add = 3
			num_districts = { type = district_mining value >= 1 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_mining value >= 2 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_mining value >= 3 }
		}
		modifier = {
			add = 6
			num_districts = { type = district_mining value >= 4 }
		}
		modifier = {
			add = 6
			num_districts = { type = district_mining value >= 6 }
		}
		modifier = {
			factor = 0
			num_districts = { type = district_mining value = 0 }
		}
		modifier = {
			factor = 1.5
			has_planet_flag = str_acceptable_habitability
		}
###
	}
}

# Farming Planet
col_farming = {
	icon = 3

	potential = {
		exists = owner
		owner = { country_uses_food = yes }
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = machine_world
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_district_farming_build_speed_mult = 0.25
		planet_farmers_produces_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_farming value > @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_farming value > @free_districts_medium_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 2
			has_designation = col_farming
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = lush_planet
				has_modifier = gpm_dense_atmospheres
				has_modifier = gpm_perfect_seasons
				has_modifier = gpm_endless_fish
				has_modifier = gpm_delicious_ingredients
				has_modifier = gpm_seasonal_flooding
				has_modifier = gpm_ice_flora
				has_modifier = gpm_extensive_reef_systems
				has_modifier = gpm_beautiful_lakes
				has_modifier = gpm_dense_forests
				has_modifier = gpm_planetwide_forest
				has_modifier = gpm_furry_packs
				has_modifier = gpm_rich_soil
				has_modifier = gpm_algae_boom
				has_modifier = gpm_ocean_currents
				has_modifier = gpm_unique_marine_habitats
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_harbor_ruins
				has_modifier = gpm_mushroom_forest
			}
		}
		modifier = {
			factor = 0.1
			OR = {
				has_modifier = bleak_planet
				has_modifier = gpm_thin_atmospheres
				has_modifier = gpm_unusual_seasons
				has_modifier = gpm_living_planet
				has_modifier = gpm_artificial_water
				has_modifier = gpm_simple_organisms
				has_modifier = gpm_great_temperature_variation
				has_modifier = gpm_ice_age
				has_modifier = gpm_locust_plagues
				has_modifier = gpm_acidic_seas
				has_modifier = gpm_trubbles
				has_modifier = gpm_blizzards
				has_modifier = bleak_planet
			}
		}
#STARNET AI
		modifier = {
			add = 3
			num_districts = { type = district_farming value >= 1 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_farming value >= 2 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_farming value >= 3 }
		}
		modifier = {
			add = 6
			num_districts = { type = district_farming value >= 4 }
		}
		modifier = {
			add = 6
			num_districts = { type = district_farming value >= 6 }
		}
		modifier = {
			factor = 0
			num_districts = { type = district_farming value = 0 }
		}
		modifier = {
			factor = 1.5
			has_planet_flag = str_acceptable_habitability
		}
###
	}
}

# Generator Planet
col_generator = {
	icon = 4

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_district_generator_build_speed_mult = 0.25
		planet_technician_produces_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = no
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			}
		}
		modifier = {
			planet_jobs_worker_produces_mult = 0.1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
				is_gestalt = yes
			}
			OR = {
				is_active_resolution = "resolution_greatergood_five_year_plans"
				is_active_resolution = "resolution_greatergood_greater_than_ourselves"
				is_active_resolution = "resolution_greatergood_balance_in_the_middle"
				is_active_resolution = "resolution_greatergood_universal_prosperity_mandate"
			}
		}
		modifier = {
			planet_jobs_simple_drone_produces_mult = 0.1
		}
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value > @free_districts_low_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value > @free_districts_medium_threshold }
			num_free_districts = { type = district_city value <= @small_planet_threshold }
			num_free_districts = { type = district_nexus value <= @small_planet_threshold }
			num_free_districts = { type = district_hive value <= @small_planet_threshold }
		}
		modifier = {
			add = 2
			has_designation = col_generator
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = hazardous_weather
				has_modifier = strong_magnetic_field
				has_modifier = gpm_frequent_thunderstorms
				has_modifier = gpm_global_thunderstorms
				has_modifier = gpm_highly_charged_air_particles
				has_modifier = gpm_strong_magnetic_field_2
				has_modifier = gpm_windy
				has_modifier = gpm_radioactive_mantle
				has_modifier = gpm_thin_ozone_layer
				has_modifier = gpm_dunes
				has_modifier = gpm_tidally_active
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_energy_grid
				has_modifier = gpm_relic_generators
			}
		}
		modifier = {
			factor = 0.1
			has_modifier = gpm_weak_magnetic_field_2
		}
		modifier = {
			add = 3
			num_districts = { type = district_generator value >= 1 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_generator value >= 2 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_generator value >= 3 }
		}
		modifier = {
			add = 6
			num_districts = { type = district_generator value >= 4 }
		}
		modifier = {
			add = 6
			num_districts = { type = district_generator value >= 6 }
		}
		modifier = {
			factor = 0
			num_districts = { type = district_generator value = 0 }
		}
		modifier = {
			factor = 1.5
			has_planet_flag = str_acceptable_habitability
		}
###
	}
}

# Hive Planet/Nest planet
col_hive = {
	icon = 1

	potential = {
		NOR = {
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		exists = owner
		owner = { is_hive_empire = yes }
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_districts_cities_cost_mult = -0.10
		planet_jobs_complex_drone_produces_mult = 0.05
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_hive value >= @free_districts_medium_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_hive value >= @free_districts_high_threshold }
		}

		modifier = {
			add = 2
			has_designation = col_hive
		}
		modifier = {
			add = 5
			has_modifier = natural_beauty
		}
		modifier = {
			add = 5
			num_districts = { type = district_hive value >= @built_districts_high_threshold }
		}
	}
}


# Nexus Planet
col_nexus = {
	icon = 1

	potential = {
		NOR = {
			uses_district_set = machine_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		exists = owner
		owner = { is_machine_empire = yes }
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_districts_cities_cost_mult = -0.10
		planet_jobs_complex_drone_produces_mult = 0.05
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_nexus value >= @free_districts_medium_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_farming value < @free_districts_low_threshold }
			num_free_districts = { type = district_mining value < @free_districts_low_threshold }
			num_free_districts = { type = district_generator value < @free_districts_low_threshold }
			num_free_districts = { type = district_nexus value >= @free_districts_high_threshold }
		}

		modifier = {
			add = 2
			has_designation = col_nexus
		}
		modifier = {
			add = 5
			has_modifier = natural_beauty
		}
		modifier = {
			add = 5
			num_districts = { type = district_nexus value >= @built_districts_high_threshold }
		}
	}
}

# Forge Planet
col_foundry = {
	icon = 5

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = machine_world
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			#uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			#uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			#uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		custom_tooltip = col_foundry_custom
		planet_district_industrial_build_speed_mult = 0.25
		planet_metallurgists_upkeep_mult = -0.20
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_industry_environmental_ordinance_waivers"
				is_active_resolution = "resolution_industry_project_cornucopia"
			}
		}
		modifier = {
			planet_metallurgists_produces_mult = 0.05
		}
	}

	weight_modifier = {
		modifier = {
			add = 3 # 2
			OR = {
				num_free_districts = { type = district_city value = @free_districts_high_threshold }
				num_free_districts = { type = district_nexus value = @free_districts_high_threshold }
				num_free_districts = { type = district_hive value = @free_districts_high_threshold }
			}
			OR = {
				AND = {
					owner = {
					has_monthly_income = { resource = alloys value < 10 }
					years_passed <= 20
					}
				}
				AND = {
					owner = {
					has_monthly_income = { resource = alloys value < 20 }
					years_passed > 20
					years_passed < 50
					}
				}
				AND = {
					owner = {
					has_monthly_income = { resource = alloys value < 40 }
					years_passed > 50
					years_passed < 75
					}
				}
				AND = {
					owner = {
					has_monthly_income = { resource = alloys value < 50 }
					years_passed > 75
					years_passed < 100
					}
				}
			}
		}

		modifier = {
			add = 7
			has_designation = col_foundry
		}

		modifier = {
			add = 0
			has_designation = col_factory
			str_industrial_switcher = no
		}

		modifier = {
			add = 50 #20
			has_designation = col_factory
			str_factory_to_foundry_switcher = yes
			or = { 
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 950
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 10
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 750
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 15
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 550
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 20
					}
				}
			}
		}
		modifier = {
			add = 50
			has_designation = col_factory
			str_foundry_to_factory_switcher = yes
			or = { 
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 850
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 10
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 650
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 15
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 450
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 20
					}
				}
			}
		}
		modifier = {
			add = 50
			has_designation = col_factory
			str_extra_switcher = yes
			or = { 
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 750
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 10
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 550
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 15
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value > 350
					}
					resource_income_compare = {
						resource = consumer_goods
						value > 20
					}
				}
			}
		}

		modifier = {
			add = 5
			str_foundry_to_factory_switcher = yes
		}
	
		modifier = {
			add = 50
			owner = {
			has_deficit = consumer_goods
			resource_stockpile_compare = {
				resource = food
				value < 300
			}
			resource_income_compare = {
				resource = food
				value < -12
			}
			resource_income_compare = {
				resource = energy
				value < 10
			}
			resource_stockpile_compare = {
				resource = energy
				value < 1000
			} }
		}


		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= 1 }
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= 2 }
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= 3 }
		}
		modifier = {
			add = 10
			num_districts = { type = district_industrial value >= 4 }
		}
		modifier = {
			add = 10
			num_districts = { type = district_industrial value >= 6 }
		}
		modifier = {
			factor = 0
			num_districts = { type = district_industrial value = 0 }
		}
#GPM
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_spaceship_graveyard
				has_modifier = gpm_radioactive_mantle
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_manufactorium
				has_modifier = gpm_relic_factories
			}
		}
###
		modifier = {
			add = 2
			has_building = building_foundry_1
		}
		modifier = {
			add = 4
			has_building = building_foundry_2
		}
		modifier = {
			add = 2
			owner = {
			resource_income_compare = {
				resource = consumer_goods
				value > 20
			}
			resource_income_compare = {
				resource = consumer_goods
				value > 1000
			} }
			num_buildings = { type = building_factory_1 value = 0 }
			num_buildings = { type = building_factory_2 value = 0 }
		}
		modifier = {
			factor = 0
			not = { owner = {
			has_deficit = consumer_goods
			resource_stockpile_compare = {
				resource = food
				value < 300
			}
			resource_income_compare = {
				resource = food
				value < -12
			}
			resource_income_compare = {
				resource = energy
				value < 10
			}
			resource_stockpile_compare = {
				resource = energy
				value < 1000
			} } }
			owner = {
			or = {
			and = {
			resource_stockpile_compare = {
				resource = minerals
				value < 100
			}
			resource_stockpile_compare = {
				resource = minerals
				value < 5
			}
			}
			and = {
				resource_stockpile_compare = {
					resource = food
					value < 200
				}
				resource_stockpile_compare = {
					resource = food
					value < -50
				}
			}
			and = {
				resource_stockpile_compare = {
					resource = food
					value < 100
				}
				resource_stockpile_compare = {
					resource = food
					value < -15
				}
			}
			} 
		}
		}
		modifier = {
			add = 2
			owner = {
			resource_income_compare = {
				resource = consumer_goods
				value > 20
			}
			resource_income_compare = {
				resource = consumer_goods
				value > 1000
			} }
		}
	}
}

# Factory Planet
col_factory = {
	icon = 6

	potential = {
		exists = owner
		OR = {
			owner = { is_regular_empire = yes }
			owner = { has_civic = civic_machine_servitor }
		}
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = machine_world
			uses_district_set = hive_world
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		custom_tooltip = col_factory_custom
		planet_district_industrial_build_speed_mult = 0.25
		planet_artisans_upkeep_mult = -0.20
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_industry_environmental_ordinance_waivers"
				is_active_resolution = "resolution_industry_project_cornucopia"
			}
		}
		modifier = {
			planet_artisans_produces_mult = 0.05
		}
	}

	weight_modifier = {
		modifier = {
			add = 4
			owner = { has_monthly_income = { resource = consumer_goods value < 5 } }
			OR = {
				num_free_districts = { type = district_city value >= @free_districts_high_threshold }
				num_free_districts = { type = district_hive value >= @free_districts_high_threshold }
				num_free_districts = { type = district_nexus value >= @free_districts_high_threshold }
			}
		}
### STARNET AI		
		modifier = {
			add = 100
			or = {
			has_designation = col_factory
			has_designation = col_foundry
			}
			owner = { 
			resource_income_compare = {
				resource = consumer_goods
				value < 0
			}
			resource_stockpile_compare = {
				resource = consumer_goods
				value < 10
			} }
			not = { owner = {
				has_deficit = consumer_goods
				resource_stockpile_compare = {
					resource = food
					value < 300
				}
				resource_income_compare = {
					resource = food
					value < -12
				}
				resource_income_compare = {
					resource = energy
					value < 10
				}
				resource_stockpile_compare = {
					resource = energy
					value < 1000
				} } }
		}
		

		modifier = {
			add = 7
			has_designation = col_factory
		}


		modifier = {
			add = 5
			str_factory_to_foundry_switcher = yes
		}

		modifier = {
			add = 50
			has_designation = col_foundry
			str_foundry_to_factory_switcher = yes
			or = { 
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value < 110
					}
					resource_income_compare = {
						resource = consumer_goods
						value < 0
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value < 190
					}
					resource_income_compare = {
						resource = consumer_goods
						value < -20
					}
				}
			}
		}


		modifier = {
			add = 50
			has_designation = col_foundry
			str_factory_to_foundry_switcher = yes
			or = { 
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value < 160
					}
					resource_income_compare = {
						resource = consumer_goods
						value < 0
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value < 250
					}
					resource_income_compare = {
						resource = consumer_goods
						value < -20
					}
				}
			}
		}

		modifier = {
			add = 50
			has_designation = col_foundry
			str_extra_switcher = yes
			or = { 
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value < 210
					}
					resource_income_compare = {
						resource = consumer_goods
						value < 0
					}
				}
				owner = {
					resource_stockpile_compare = {
						resource = consumer_goods
						value < 300
					}
					resource_income_compare = {
						resource = consumer_goods
						value < -20
					}
				}
			}
		}

		modifier = {
			add = 2
			owner = {
			used_naval_capacity_percent > 0.9
			resource_income_compare = {
				resource = alloys
				value > 700
			}
			resource_stockpile_compare = {
				resource = alloys
				value > 7000
			} }
			num_buildings = { type = building_factory_1 value = 0 }
			num_buildings = { type = building_factory_2 value = 0 }
		}
		modifier = {
			add = 2
			owner = {
			used_naval_capacity_percent > 0.9
			resource_income_compare = {
				resource = alloys
				value > 700
			}
			resource_stockpile_compare = {
				resource = alloys
				value > 7000
			} }
		}

		modifier = {
			add = 5
			has_designation = col_factory
			owner = { 
			or = {
			resource_income_compare = {
				resource = consumer_goods
				value < 20 }
			resource_stockpile_compare = {
				resource = consumer_goods
				value < 250
			}
			} }
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= 1 }
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= 2 }
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= 3 }
		}
		modifier = {
			add = 10
			num_districts = { type = district_industrial value >= 4 }
		}
		modifier = {
			add = 10
			num_districts = { type = district_industrial value >= 6 }
		}
###
		modifier = {
			factor = 0
			num_districts = { type = district_industrial value = 0 }
		}
#GPM
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_exotic_spices
				has_modifier = gpm_delicious_ingredients
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_manufactorium
				has_modifier = gpm_relic_factories
			}
		}
###
		modifier = {
			add = 6 # 2
			has_building = building_factory_1
		}
		modifier = {
			add = 10
			has_building = building_factory_2
		}
		modifier = {
			add = 2
			owner = {
				resource_income_compare = {
					resource = consumer_goods
					value < 0
				}
			}
			not = { has_designation = col_foundry }
		}
		modifier = {
			add = 2
			owner = {
				resource_income_compare = {
					resource = consumer_goods
					value < 0
				}
			}
			not = { has_designation = col_foundry }
			num_buildings = { type = building_foundry_1 value = 0 }
			num_buildings = { type = building_foundry_2 value = 0 }
		}
	}
}

# Refinery Planet
col_refinery = {
	icon = 7

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			#uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_refiners_upkeep_mult = -0.1
		planet_translucers_upkeep_mult = -0.1
		planet_chemists_upkeep_mult = -0.1
		planet_building_refinery_build_speed_mult = 0.25
		planet_building_chemical_plant_build_speed_mult = 0.25
		planet_building_crystal_plant_build_speed_mult = 0.25
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_galactic_community_member = yes
			}
			OR = {
				is_active_resolution = "resolution_industry_environmental_ordinance_waivers"
				is_active_resolution = "resolution_industry_project_cornucopia"
			}
		}
		modifier = {
			planet_refiners_produces_mult = 0.05
			planet_translucers_produces_mult = 0.05
			planet_chemists_produces_mult = 0.05
		}
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_mining value <= @free_districts_low_threshold }
			num_free_districts = { type = district_farming value <= @free_districts_low_threshold }
			num_free_districts = { type = district_generator value <= @free_districts_low_threshold }
			OR = {
				AND = {
					num_districts = {
						type = district_city
						value >= 1
					}
					num_free_districts = { type = district_city value <= @free_districts_medium_threshold }
				}
				AND = {
					num_districts = {
						type = district_nexus
						value >= 1
					}
					num_free_districts = { type = district_nexus value <= @free_districts_medium_threshold }
				}
				AND = {
					num_districts = {
						type = district_hive
						value >= 1
					}
					num_free_districts = { type = district_hive value <= @free_districts_medium_threshold }
				}
			}
			OR = {
				owner = { has_monthly_income = { resource = volatile_motes value < 0 } }
				owner = { has_monthly_income = { resource = exotic_gases value < 0 } }
				owner = { has_monthly_income = { resource = rare_crystals value < 0 } }
			}

		}
		modifier = {
			add = 5
			has_designation = col_refinery
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_precursor_planetary_gun
				has_modifier = gpm_precursor_vaults
				has_modifier = gpm_precursor_crashed_spacestation
			}
		}
		modifier = {
			add = 2
			num_buildings = { type = building_refinery value >= 2 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_refinery value >= 3 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_refinery value >= 4 }
		}
		modifier = {
			add = 2
			num_buildings = { type = building_crystal_plant value >= 2 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_crystal_plant value >= 3 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_crystal_plant value >= 4 }
		}
		modifier = {
			add = 2
			num_buildings = { type = building_chemical_plant value >= 2 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_chemical_plant value >= 3 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_chemical_plant value >= 4 }
		}
		modifier = {
			add = 10
				OR = {
					num_buildings = { type = building_refinery value >= 5 }
					num_buildings = { type = building_crystal_plant value >= 5 }
					num_buildings = { type = building_chemical_plant value >= 5 }
				}
		}
	}
}

# Research Planet
col_research = {
	icon = 8

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			#uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			#uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			#uses_district_set = pdbiofort
			#uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_building_research_lab_1_build_speed_mult = 0.25
		planet_researchers_upkeep_mult = -0.2

	}

	weight_modifier = {
		modifier = {
			add = 1
			OR = {
				AND = {
					num_free_districts = { type = district_city value >= @free_districts_high_threshold }
					num_free_districts = { type = district_mining value <= @free_districts_verylow_threshold }
					num_free_districts = { type = district_farming value <= @free_districts_verylow_threshold }
					num_free_districts = { type = district_generator value <= @free_districts_verylow_threshold }
				}
				AND = {
					num_free_districts = { type = district_hive value >= @free_districts_high_threshold }
					num_free_districts = { type = district_mining value <= @free_districts_verylow_threshold }
					num_free_districts = { type = district_farming value <= @free_districts_verylow_threshold }
					num_free_districts = { type = district_generator value <= @free_districts_verylow_threshold }
				}
				AND = {
					num_free_districts = { type = district_nexus value >= @free_districts_high_threshold }
					num_free_districts = { type = district_mining value <= @free_districts_verylow_threshold }
					num_free_districts = { type = district_farming value <= @free_districts_verylow_threshold }
					num_free_districts = { type = district_generator value <= @free_districts_verylow_threshold }
				}
			}
		}
		modifier = {
			add = 5
			has_designation = col_research
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = wild_storms
				has_modifier = titanic_life
				has_modifier = atmospheric_hallucinogen
				has_modifier = dangerous_wildlife
				has_modifier = unstable_tectonics
				has_modifier = gpm_decaying_structures
				has_modifier = gpm_surface_of_bones
				has_modifier = gpm_recent_mass_extinction
				has_modifier = gpm_ruined_battlefield
				has_modifier = gpm_single_biome
				has_modifier = gpm_hyper_complex_biome
				has_modifier = gpm_thin_atmospheres
				has_modifier = gpm_weak_magnetic_field_2
				has_modifier = gpm_floating_islands
				has_modifier = gpm_unnatural_world
				has_modifier = gpm_artificial_water
				has_modifier = gpm_clear_skies
				has_modifier = gpm_melted_ice_caps
				has_modifier = gpm_newly_evolved_complex_organisms
				has_modifier = gpm_many_extremophiles
				has_modifier = gpm_ice_age
				has_modifier = gpm_empathic_life
				has_modifier = gpm_strange_ice_river
				has_modifier = gpm_crystal_moon_palace
				has_modifier = gpm_juggernaut_manta_rays
				has_modifier = gpm_old_world
				has_modifier = gpm_proto_forests
				has_modifier = gpm_artificial_core
				has_modifier = gpm_ecological_nervous_system
				has_modifier = gpm_odd_cloud_shapes
				has_deposit = d_central_spire
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_remnants
				has_modifier = gpm_precursor_mechs
				has_modifier = gpm_precursor_singularity_drive
				has_modifier = gpm_precursor_outpost_ruins
				has_modifier = gpm_precursor_obelisks
				has_modifier = gpm_relic_laboratories
				has_modifier = gpm_time_displaced_planet
			}
		}
		modifier = {
			add = 4 # 2
			num_buildings = { type = building_research_lab_1 value >= 2 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_research_lab_1 value >= 3 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_research_lab_1 value >= 4 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_research_lab_1 value >= 5 }
		}
		modifier = {
			add = 8
			num_buildings = { type = building_research_lab_2 value >= 1 }
		}
		modifier = {
			add = 8
			num_buildings = { type = building_research_lab_2 value >= 2 }
		}
		modifier = {
			add = 8
			num_buildings = { type = building_research_lab_3 value >= 1 }
		}
		modifier = {
			factor = 0
			num_buildings = { type = building_research_lab_1 value = 0 }
			num_buildings = { type = building_research_lab_2 value = 0 }
			num_buildings = { type = building_research_lab_3 value = 0 }
		}
	}
}


# Fortress Planet
col_fortress = {
	icon = 9

	potential = {
		exists = owner
		NOR = {
			uses_district_set = city_world
			uses_district_set = ring_world
			uses_district_set = habitat
			uses_district_set = machine_world
			uses_district_set = hive_world
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			#uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_buildings_strongholds_cost_mult = -0.20
		planet_orbital_bombardment_damage = -0.10
		army_defense_damage_mult = 0.20
	}

	weight_modifier = {
		modifier = {
			add = 5
			has_designation = col_fortress
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_precursor_planetary_gun
				has_modifier = gpm_precursor_bunker_grid
				has_modifier = gpm_precursor_planetary_shield
				has_modifier = gpm_precursor_eternal_fortress
			}
		}
		modifier = {
			add = 3
			num_buildings = { type = building_stronghold value >= 2 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_stronghold value >= 3 }
		}
		modifier = {
			add = 5
			num_buildings = { type = building_stronghold value >= 4 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_fortress value >= 1 }
		}
		modifier = {
			add = 5
			num_buildings = { type = building_fortress value >= 2 }
		}
	}
}

# Capital Planet
col_capital = {
	icon = 10

	potential = {
		is_capital = yes
		NAND = {
			exists = owner
			owner = {
				OR = {
					NOT = { is_country_type = default }
					is_gestalt = yes
				}
			}
		}
	}

	planet_modifier = {
		planet_stability_add = 5
		planet_amenities_add = 10
		pop_government_ethic_attraction = 1
	}

	weight_modifier = {
		base = 15000
	}
}

# Capital Planet - Hive Mind
col_capital_hive = {
	icon = 10

	potential = {
		is_capital = yes
		exists = owner
		owner = {
			is_country_type = default
			is_hive_empire = yes
		}
	}

	planet_modifier = {
		planet_stability_add = 5
		planet_amenities_no_happiness_add = 10
		planet_crime_no_happiness_add = -20
	}

	weight_modifier = {
		base = 15000
	}
}

# Capital Planet - Machine Empire
col_capital_machine = {
	icon = 10

	potential = {
		is_capital = yes
		exists = owner
		owner = {
			is_country_type = default
			is_machine_empire = yes
		}
	}

	planet_modifier = {
		planet_stability_add = 5
		planet_amenities_no_happiness_add = 10
		planet_crime_no_happiness_add = -20
		planet_jobs_complex_drone_produces_mult = 0.05
		planet_jobs_simple_drone_produces_mult = 0.05
	}

	weight_modifier = {
		base = 15000
	}
}

# Habitat
col_habitat = {
	icon = 12

	potential = {
		OR = {
		uses_district_set = habitat
		uses_district_set = pdarchive
		}
		is_capital = no #Aripatch
	}

	weight_modifier = {
		base = 1
	}
}

# Habitat Energy
col_habitat_energy = {
	icon = 19

	potential = {
		OR = {
		uses_district_set = habitat
		uses_district_set = pdarchive
		}
		exists = owner
		is_capital = no #Aripatch
		OR = {
			owner = { is_gestalt = yes }
			has_planet_flag = energy_habitat
		}
	}
	planet_modifier = {
	    planet_districts_hab_energy_cost_mult = -0.1
		planet_technician_produces_mult = 0.1
	}
	weight_modifier = {
		base = 0
		modifier = {
			add = 1.8
			num_districts = {type = district_hab_energy value >= 1}
		}
		modifier = {
			add = 1.8
			num_districts = {type = district_hab_energy value >= 2}
		}
		modifier = {
			add = 3.6
			num_districts = {type = district_hab_energy value >= 4}
		}
		modifier = {
			add = 3.6
			num_districts = {type = district_hab_energy value >= 6}
		}
		modifier = {
			factor = 1.16
			has_building = building_energy_grid
		}
		modifier = {
			factor = 1.33
			has_building = building_energy_nexus
		}
		modifier = {
			factor = 1.33
			owner = { is_hive_empire = yes }
		}
	}
}

# Habitat Cultural
col_habitat_leisure = {
	icon = 20

	potential = {
		OR = {
		uses_district_set = habitat
		uses_district_set = pdarchive
		}
		exists = owner
		is_capital = no #Aripatch
		owner = {
			OR = {
				is_gestalt = no
				has_valid_civic = civic_machine_servitor
			}
		}
	}
	planet_modifier = {
	    planet_districts_hab_leisure_cost_mult = -0.1
		pop_happiness = 0.10
	}
	weight_modifier = {
		base = 1
		modifier = {
			factor = 3
			has_designation = col_habitat_leisure
		}
		modifier = {
			factor = 3
			has_modifier = pleasure_palace
		}
		modifier = {
			factor = 3
			num_districts = { type = district_hab_cultural value >= 3 }
		}
	}
}

# Habitat Trade
col_habitat_trade = {
	icon = 21

	potential = {
		OR = {
		uses_district_set = habitat
		uses_district_set = pdarchive
		}
		exists = owner
		owner = { is_gestalt = no }
		is_capital = no #Aripatch
	}
	planet_modifier = {
		planet_districts_hab_trade_cost_mult = -0.1
		trade_value_mult = 0.20
	}
	weight_modifier = {
		base = 0
		modifier = {
			add = 3.2
			num_districts = { type = district_hab_commercial value >= 1 }
		}
		modifier = {
			add = 3.2
			num_districts = { type = district_hab_commercial value >= 2 }
		}
		modifier = {
			add = 6.4
			num_districts = { type = district_hab_commercial value >= 4 }
		}
		modifier = {
			add = 6.4
			num_districts = { type = district_hab_commercial value >= 6 }
		}
	}
}

# Habitat Research
col_habitat_research = {
	icon = 22

	potential = {
		OR = {
		uses_district_set = habitat
		uses_district_set = pdarchive
		}
		is_capital = no #Aripatch
	}
	planet_modifier = {
		planet_districts_hab_research_cost_mult = -0.1
		planet_researchers_produces_mult = 0.1
	}
	weight_modifier = {
		base = 0
		modifier = {
			add = 1.08
			num_districts = { type = district_hab_science value >= 1 }
			}
		modifier = {
			add = 1.08
			num_districts = { type = district_hab_science value >= 2 }
		}
		modifier = {
			add = 2.16
			num_districts = { type = district_hab_science value >= 4 }
		}
		modifier = {
			add = 2.16
			num_districts = { type = district_hab_science value >= 6 }
		}
		modifier = {
			add = 0.72
			num_buildings = { type = building_research_lab_1 value >= 1 }
		}
		modifier = {
			add = 0.72
			num_buildings = { type = building_research_lab_1 value >= 2 }
		}
		modifier = {
			add = 1.44
			num_buildings = { type = building_research_lab_1 value >= 4 }
		}
		modifier = {
			add = 2.88
			num_buildings = { type = building_research_lab_2 value >= 2 }
		}
		modifier = {
			add = 2.88
			num_buildings = { type = building_research_lab_2 value >= 4 }
		}
		modifier = {
			add = 4.32
			num_buildings = { type = building_research_lab_3 value >= 2 }
		}
		modifier = {
			add = 4.32
			num_buildings = { type = building_research_lab_3 value >= 4 }
		}
		modifier = { 		#Count 1 Consumer good as 2.5 energy.
			factor = 1.25
			owner = { country_uses_consumer_goods = yes }
		}
	}
}

# Habitat Mining
col_habitat_mining = {
	icon = 23

	potential = {
		OR = {
		uses_district_set = habitat
		uses_district_set = pdarchive
		}
		has_planet_flag = mining_habitat
		is_capital = no #Aripatch
	}
	planet_modifier = {
		planet_districts_hab_mining_cost_mult = -0.10
		planet_miners_produces_mult = 0.1
	}

	weight_modifier = {
		base = 0
		modifier = {
			add = 1.2
			num_districts = { type = district_hab_mining value >= 1 }
		}
		modifier = {
			add = 1.2
			num_districts = { type = district_hab_mining value >= 2 }
		}
		modifier = {
			add = 2.4
			num_districts = { type = district_hab_mining value >= 4 }
		}
		modifier = {
			add = 2.4
			num_districts = { type = district_hab_mining value >= 6 }
		}
		modifier = {
			factor = 1.25
			has_building = building_mineral_purification_plant
		}
		modifier = {
			factor = 1.50
			has_building = building_mineral_purification_plant
		}
		modifier = {
			factor = 1.33
			owner = { is_hive_empire = yes }
		}
		modifier = { 		#Count 1 Mineral as 1.5 energy
			factor = 1.5
			always = yes
		}
	}
}

# Habitat Fortress
col_habitat_fortress = {
	icon = 24

	potential = {
		OR = {
		uses_district_set = habitat
		uses_district_set = pdarchive
		}
		is_capital = no #Aripatch
	}
	planet_modifier = {
		planet_buildings_strongholds_cost_mult = -0.30
		planet_orbital_bombardment_damage = -0.10
		army_defense_damage_mult = 0.20
	}
	weight_modifier = {
		base = 1
		modifier = {
			factor = 3
			has_designation = col_habitat_fortress
		}
		modifier = {
			factor = 2
			num_buildings = { type = building_stronghold value >= 3 }
		}
		modifier = {
			factor = 2
			num_buildings = { type = building_fortress value >= 2 }
		}
		modifier = {
			factor = 3
			num_buildings = { type = building_stronghold value >= 5 }
		}
		modifier = {
			factor = 3
			num_buildings = { type = building_fortress value >= 4 }
		}
	}
}

# Habitat Foundry
col_habitat_foundry = {
	icon = 25

	potential = {
		OR = {
		uses_district_set = habitat
		uses_district_set = pdarchive
		}
		is_capital = no #Aripatch
	}
	planet_modifier = {
		custom_tooltip = col_habitat_foundry_custom
		planet_districts_hab_industrial_cost_mult = -0.1
		planet_metallurgists_upkeep_mult = -0.2
	}
	weight_modifier = {
		base = 0
		modifier = {
			add = 3.2
			num_districts = {type = district_hab_industrial value >= 1}
		}
		modifier = {
			add = 3.2
			num_districts = {type = district_hab_industrial value >= 2}
		}
		modifier = {
			add = 6.4
			num_districts = {type = district_hab_industrial value >= 4}
		}
		modifier = {
			add = 6.4
			num_districts = {type = district_hab_industrial value >= 6}
		}
		modifier = {
			factor = 1.25
			has_building = building_foundry_2
		}
		modifier = {
			factor = 1.5
			has_building = building_foundry_3
		}
		modifier = { 		#Count 1 Mineral as 1.5 energy
			factor = 1.5
			always = yes
		}
		modifier = {
			factor = 0
			NOR = {
			has_building = building_foundry_1
			has_building = building_foundry_2
				has_building = building_foundry_3
			}	
		}
		modifier = {
			factor = 0
		OR = {
			has_building = building_factory_1
			has_building = building_factory_2
				has_building = building_factory_2
		}
		}
	}
}

# Habitat Factory
col_habitat_factory = {
	icon = 26

	potential = {
		uses_district_set = habitat
		exists = owner
		owner = {
			OR = {
				is_regular_empire = yes
				has_civic = civic_machine_servitor
			}
		}
	}
	planet_modifier = {
		custom_tooltip = col_habitat_factory_custom
		planet_districts_hab_industrial_cost_mult = -0.1
		planet_artisans_upkeep_mult = -0.2
	}
	weight_modifier = {
		base = 0
		modifier = {
			add = 2.4
			num_districts = {type = district_hab_industrial value >= 1}
		}
		modifier = {
			add = 2.4
			num_districts = {type = district_hab_industrial value >= 2}
		}
		modifier = {
			add = 4.8
			num_districts = {type = district_hab_industrial value >= 4}
		}
		modifier = {
			add = 4.8
			num_districts = {type = district_hab_industrial value >= 6}
		}
		modifier = {
			factor = 1.16
			has_building = building_factory_2
		}
		modifier = {
			factor = 1.33
			has_building = building_factory_3
		}
		modifier = { 		#Count 1 Mineral as 1.5 energy
			factor = 1.5
			always = yes
		}
		modifier = {
			factor = 0
			OR = {
				has_building = building_foundry_1
				has_building = building_foundry_2
				has_building = building_foundry_3
			}	
		}
		modifier = {
			factor = 0
			NOR = {
				has_building = building_factory_1
				has_building = building_factory_2
				has_building = building_factory_2
			}	
		}
	}
}

# Habitat Refinery
col_habitat_refinery = {
	icon = 27

	potential = {
		uses_district_set = habitat
	}
	planet_modifier = {
		planet_building_refinery_build_speed_mult = 0.25
		planet_building_chemical_plant_build_speed_mult = 0.25
		planet_building_crystal_plant_build_speed_mult = 0.25
		planet_refiners_upkeep_mult = -0.2
		planet_translucers_upkeep_mult = -0.2
		planet_chemists_upkeep_mult = -0.2
	}

	weight_modifier = {
		base = 0
		modifier = {
			add = 4
			num_buildings = { type = building_chemical_plant value >= 2}
		}
		modifier = {
			add = 4
			num_buildings = { type = building_crystal_plant value >= 2}
		}
		modifier = {
			add = 4
			num_buildings = { type = building_refinery value >= 2}
		}
		modifier = {
			add = 4
			num_buildings = { type = building_chemical_plant value >= 4}
		}
		modifier = {
			add = 4
			num_buildings = { type = building_crystal_plant value >= 4}
		}
		modifier = {
			add = 4
			num_buildings = { type = building_refinery value >= 4}
		}
		modifier = { 		#Count 1 Mineral as 1.5 energy
			factor = 1.5
			always = yes
		}
	}
}



# Rural Planet - Gestalt
col_rural_gestalt = {
	icon = 13

	potential = {
		NOR = { 
			uses_district_set = habitat
			uses_district_set = ring_world
			uses_district_set = machine_world
			uses_district_set = hive_world
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		exists = owner
		owner = { is_gestalt = yes }
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_district_farming_build_speed_mult = 0.25
		planet_district_mining_build_speed_mult = 0.25
		planet_district_generator_build_speed_mult = 0.25
		planet_jobs_simple_drone_produces_mult = 0.10
	}

	weight_modifier = {
		modifier = {
			add = 1
			OR = {
				AND = {
					num_free_districts = { type = district_mining value <= @free_districts_low_threshold }
					num_free_districts = { type = district_farming value <= @free_districts_low_threshold }
					num_free_districts = { type = district_generator value <= @free_districts_low_threshold }
					num_free_districts = { type = district_hive value < @free_districts_high_threshold }
				}
				AND = {
					num_free_districts = { type = district_farming value > @free_districts_low_threshold }
					num_free_districts = { type = district_generator value > @free_districts_low_threshold }
					num_free_districts = { type = district_hive value < @free_districts_high_threshold }
				}
				AND = {
					num_free_districts = { type = district_mining value > @free_districts_low_threshold }
					num_free_districts = { type = district_generator value > @free_districts_low_threshold }
					num_free_districts = { type = district_hive value < @free_districts_high_threshold }
				}
				AND = {
					num_free_districts = { type = district_mining value > @free_districts_low_threshold }
					num_free_districts = { type = district_farming value > @free_districts_low_threshold }
					num_free_districts = { type = district_hive value < @free_districts_high_threshold }
				}
			}
		}
		modifier = {
			add = 1
			num_districts = { type = district_mining value > @built_districts_low_threshold }
			num_districts = { type = district_farming value > @built_districts_low_threshold }
			num_districts = { type = district_generator value > @built_districts_low_threshold }
			num_districts = { type = district_hive value <= @built_districts_medium_threshold }
		}
		modifier = {
			add = 3
			num_districts = { type = district_mining value > @built_districts_medium_threshold }
			num_districts = { type = district_farming value > @built_districts_medium_threshold }
			num_districts = { type = district_generator value > @built_districts_medium_threshold }
			num_districts = { type = district_hive value <= @built_districts_high_threshold }
		}
###STARNET AI
		modifier = {
			add = 1.5
			num_districts = { type = district_mining value >= 1 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_mining value >= 2 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_mining value >= 3 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_mining value >= 4 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_mining value >= 6 }
		}

		modifier = {
			add = 1.5
			num_districts = { type = district_farming value >= 1 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_farming value >= 2 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_farming value >= 3 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_farming value >= 4 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_farming value >= 6 }
		}



		modifier = {
			add = 1.5
			num_districts = { type = district_generator value >= 1 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_generator value >= 2 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_generator value >= 3 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_generator value >= 4 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_generator value >= 6 }
		}


		modifier = {
			factor = 1.5
			has_planet_flag = str_acceptable_habitability
		}

###

		modifier = {
			add = 1
			has_designation = col_rural_gestalt
		}
	}
}


# Rural Planet
col_rural = {
	icon = 13

	potential = {
		exists = owner
		owner = { is_gestalt = no }
		NOR = {
			uses_district_set = habitat
			uses_district_set = ring_world
			uses_district_set = city_world
			uses_district_set = pdshroudarc
			uses_district_set = pdarchive
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdplanethab	
			uses_district_set = pdbioforge
			uses_district_set = pdbiocapital
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinecapital
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiofort
			uses_district_set = pdmachinefort
			uses_district_set = pdcorpoarc
		}
		is_special_colony_type = no
	}

	planet_modifier = {
		planet_district_farming_build_speed_mult = 0.25
		planet_district_generator_build_speed_mult = 0.25
		planet_district_mining_build_speed_mult = 0.25
		planet_jobs_worker_produces_mult = 0.10
	}

	weight_modifier = {
		modifier = {
			add = 1
			OR = {
				AND = {
					num_free_districts = { type = district_mining value <= @free_districts_low_threshold }
					num_free_districts = { type = district_farming value <= @free_districts_low_threshold }
					num_free_districts = { type = district_generator value <= @free_districts_low_threshold }
					num_free_districts = { type = district_city value < @free_districts_high_threshold }
				}
				AND = {
					num_free_districts = { type = district_farming value > @free_districts_low_threshold }
					num_free_districts = { type = district_generator value > @free_districts_low_threshold }
					num_free_districts = { type = district_city value < @free_districts_high_threshold }
				}
				AND = {
					num_free_districts = { type = district_mining value > @free_districts_low_threshold }
					num_free_districts = { type = district_generator value > @free_districts_low_threshold }
					num_free_districts = { type = district_city value < @free_districts_high_threshold }
				}
				AND = {
					num_free_districts = { type = district_mining value > @free_districts_low_threshold }
					num_free_districts = { type = district_farming value > @free_districts_low_threshold }
					num_free_districts = { type = district_city value < @free_districts_high_threshold }
				}
			}
		}
		modifier = {
			add = 1
			num_districts = { type = district_mining value > @built_districts_low_threshold }
			num_districts = { type = district_farming value > @built_districts_low_threshold }
			num_districts = { type = district_generator value > @built_districts_low_threshold }
			num_districts = { type = district_city value <= @built_districts_medium_threshold }
		}
		modifier = {
			add = 3
			num_districts = { type = district_mining value > @built_districts_medium_threshold }
			num_districts = { type = district_farming value > @built_districts_medium_threshold }
			num_districts = { type = district_generator value > @built_districts_medium_threshold }
			num_districts = { type = district_city value <= @built_districts_high_threshold }
		}
###STARNET AI
		modifier = {
			add = 1.5
			num_districts = { type = district_mining value >= 1 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_mining value >= 2 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_mining value >= 3 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_mining value >= 4 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_mining value >= 6 }
		}

		modifier = {
			add = 1.5
			num_districts = { type = district_farming value >= 1 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_farming value >= 2 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_farming value >= 3 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_farming value >= 4 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_farming value >= 6 }
		}



		modifier = {
			add = 1.5
			num_districts = { type = district_generator value >= 1 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_generator value >= 2 }
		}
		modifier = {
			add = 1.5
			num_districts = { type = district_generator value >= 3 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_generator value >= 4 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_generator value >= 6 }
		}


		modifier = {
			factor = 1.5
			has_planet_flag = str_acceptable_habitability
		}

###
		modifier = {
			add = 1
			has_designation = col_rural
		}
	}
}

# Fallen Empire Capital
col_fe_capital = {
	icon = 10

	potential = {
		is_capital = yes
		exists = owner
		owner = { is_fallen_empire = yes }
	}

	planet_modifier = {
		planet_stability_add = 10
	}

	weight_modifier = {
		base = 1000
	}
}


# Fallen Empire Colony
col_fe_colony = {
	icon = 11

	potential = {
		is_capital = no
		exists = owner
		owner = { is_fallen_empire = yes }
	}

	planet_modifier = {
		planet_stability_add = 5
	}

	weight_modifier = {
		base = 1000
	}
}

# Resort World
col_resort = {
	icon = 14

	potential = {
		has_modifier = resort_colony
	}

	planet_modifier = {
		planet_housing_add = 10
	}

	weight_modifier = {
		base = 1000
	}
}

# Penal Colony
col_penal = {
	icon = 15

	potential = {
		has_modifier = penal_colony
	}

	weight_modifier = {
		base = 1000
	}
}

# Primitive World
col_primitive = {
	icon = 16

	potential = {
		exists = owner
		owner = { is_country_type = primitive }
	}

	weight_modifier = {
		base = 1000
	}
}

# Infested World
col_infested = {
	icon = 17

	potential = {
		exists = owner
		owner = { is_country_type = swarm }
	}

	weight_modifier = {
		base = 1000
	}
}


# Contingency World
col_contingency = {
	icon = 17

	potential = {
		exists = owner
		owner = { is_country_type = ai_empire }
	}

	weight_modifier = {
		base = 1000
	}
}


# Slave-Breeding Colony
col_slave = {
	icon = 18

	potential = {
		has_modifier = slave_colony
	}

	weight_modifier = {
		base = 1000
	}
}

# Ringworld Mixed
col_ring_mix = {
	icon = 18

	potential = {
		uses_district_set = ring_world
	}

	planet_modifier = {
		planet_immigration_pull_mult = 0.2
		planet_jobs_produces_mult = 0.05
	}

	weight_modifier = {
		base = 100
	}
}

col_ring_research = {
	icon = 8

	potential = {
		uses_district_set = ring_world
	}

	planet_modifier = {
		planet_jobs_engineering_research_produces_mult = 0.15
		planet_jobs_physics_research_produces_mult = 0.15
		planet_jobs_society_research_produces_mult = 0.15
	}

	weight_modifier = {
		modifier = {
			add = 150
			planet_resource_compare = {
				resource = physics_research
				value > 60
				type = produces
			}
		}
		modifier = {
			add = 100
			has_designation = col_ring_research
		}
		modifier = {
			add = 200
			is_capital = no
			num_districts = { type = district_rw_science value >= 1 }
		}
	}
}

col_ring_farming = {
	icon = 3

	potential = {
		uses_district_set = ring_world
	}

	planet_modifier = {
		planet_farmers_food_produces_mult = 0.25
	}

	weight_modifier = {
		modifier = {
			add = 100
			has_designation = col_ring_farming
		}
		modifier = {
			add = 200
			is_capital = no
			num_districts = { type = district_rw_farming value >= 1 }
		}
	}
}

col_ring_trade = {
	icon = 1

	potential = {
		uses_district_set = ring_world
		exists = owner
		owner = { is_gestalt = no }
	}

	planet_modifier = {
		trade_value_mult = 0.2
	}

	weight_modifier = {
		modifier = {
			add = 100
			has_designation = col_ring_trade
		}
		modifier = {
			add = 200
			is_capital = no
			num_districts = { type = district_rw_commercial value >= 1 }
		}
	}
}

col_ring_generator = {
	icon = 4

	potential = {
		uses_district_set = ring_world
		exists = owner
		owner = { is_gestalt = yes }
	}

	planet_modifier = {
		planet_technician_energy_produces_mult = 0.25
	}

	weight_modifier = {
		modifier = {
			add = 100
			has_designation = col_ring_generator
		}
		modifier = {
			add = 200
			is_capital = no
			num_districts = { type = district_rw_generator value >= 1 }
		}
	}
}

# Ecumenpolis
col_ecu_mix = {
	icon = 1

	potential = {
		OR = {
		uses_district_set = city_world
		uses_district_set = pdecocity
		uses_district_set = pdpalacearc
		#uses_district_set = pdbioforge
		#uses_district_set = pdfloraforge
		#uses_district_set = pdmachinefactory
		uses_district_set = pdmachinecapital
		uses_district_set = pdmilarc
		uses_district_set = pdmachinecapital
		uses_district_set = pdcorpoarc
		}
	}


	planet_modifier = {
		planet_districts_cost_mult = -0.05
	}

	weight_modifier = {
		base = 10
	}
}

# Ecumenpolis Foundry
col_ecu_foundry = {
	icon = 5

	potential = {
		OR = {
			uses_district_set = city_world
			#uses_district_set = pdbioforge
			#uses_district_set = pdfloraforge
			#uses_district_set = pdmachinefactory
			uses_district_set = pdcorpoarc
		}
	}


	planet_modifier = {
		planet_building_foundry_1_build_speed_mult = 0.25
		planet_district_arcology_arms_industry_build_speed_mult = 0.25
		planet_metallurgists_upkeep_mult = -0.2
	}

	weight_modifier = {
		base = 10
		modifier = {
			add = 5
			owner = { has_monthly_income = { resource = alloys value < 100 } }
		}
		modifier = {
			add = 5
			has_designation = col_ecu_foundry
		}
#GPM
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_spaceship_graveyard
				has_modifier = gpm_radioactive_mantle
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_manufactorium
				has_modifier = gpm_relic_factories
			}
		}
###
		modifier = {
			add = 3
			num_districts = { type = district_arcology_arms_industry value >= 2 }
		}
		modifier = {
			add = 5
			num_districts = { type = district_arcology_arms_industry value >= 3 }
		}
		modifier = {
			add = 2
			has_building = building_foundry_1
		}
		modifier = {
			add = 4
			has_building = building_foundry_2
		}
		modifier = {
			factor = 0
			num_buildings = { type = building_foundry_1 value = 0 }
			num_buildings = { type = building_foundry_2 value = 0 }
		}
	}
}

# Ecumenpolis Factory
col_ecu_factory = {
	icon = 6

	potential = {
		OR = {
		uses_district_set = city_world
		uses_district_set = pdcorpoarc
		}
		exists = owner
		OR = {
			owner = { is_regular_empire = yes }
			owner = { has_civic = civic_machine_servitor }
		}
	}


	planet_modifier = {
		planet_building_factory_1_build_speed_mult = 0.25
		planet_district_arcology_civilian_industry_build_speed_mult = 0.25
		planet_artisans_upkeep_mult = -0.2
	}

	weight_modifier = {
		base = 10
		modifier = {
			add = 5
			owner = { has_monthly_income = { resource = consumer_goods value < 5 } }
		}
		modifier = {
			add = 5
			has_designation = col_ecu_factory
		}
#GPM
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_exotic_spices
				has_modifier = gpm_delicious_ingredients
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_manufactorium
				has_modifier = gpm_relic_factories
			}
		}
###
		modifier = {
			add = 2
			num_districts = { type = district_arcology_civilian_industry value >= 2 }
		}
		modifier = {
			add = 3
			num_districts = { type = district_arcology_civilian_industry value >= 3 }
		}
		modifier = {
			add = 2
			has_building = building_factory_1
		}
		modifier = {
			add = 4
			has_building = building_factory_2
		}
		modifier = {
			factor = 0
			num_buildings = { type = building_factory_1 value = 0 }
			num_buildings = { type = building_factory_2 value = 0 }
		}
	}
}

# Ecumenpolis Research
col_ecu_research = {
	icon = 8

	potential = {
		OR = {
			uses_district_set = city_world
			uses_district_set = pdecocity
			uses_district_set = pdpalacearc
			uses_district_set = pdmilarc
		uses_district_set = pdcorpoarc
		}
	}


	planet_modifier = {
		planet_building_research_lab_1_build_speed_mult = 0.25
		planet_researchers_upkeep_mult = -0.2
	}

	weight_modifier = {
		base = 10
		modifier = {
			add = 5
			owner = { has_monthly_income = { resource = physics_research value < 200 } }
			owner = { has_monthly_income = { resource = society_research value < 200 } }
			owner = { has_monthly_income = { resource = engineering_research value < 200 } }
		}
		modifier = {
			add = 5
			has_designation = col_ecu_research
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = wild_storms
				has_modifier = titanic_life
				has_modifier = atmospheric_hallucinogen
				has_modifier = dangerous_wildlife
				has_modifier = unstable_tectonics
				has_modifier = gpm_decaying_structures
				has_modifier = gpm_surface_of_bones
				has_modifier = gpm_recent_mass_extinction
				has_modifier = gpm_ruined_battlefield
				has_modifier = gpm_single_biome
				has_modifier = gpm_hyper_complex_biome
				has_modifier = gpm_thin_atmospheres
				has_modifier = gpm_weak_magnetic_field_2
				has_modifier = gpm_floating_islands
				has_modifier = gpm_unnatural_world
				has_modifier = gpm_artificial_water
				has_modifier = gpm_clear_skies
				has_modifier = gpm_melted_ice_caps
				has_modifier = gpm_newly_evolved_complex_organisms
				has_modifier = gpm_many_extremophiles
				has_modifier = gpm_ice_age
				has_modifier = gpm_empathic_life
				has_modifier = gpm_strange_ice_river
				has_modifier = gpm_crystal_moon_palace
				has_modifier = gpm_juggernaut_manta_rays
				has_modifier = gpm_old_world
				has_modifier = gpm_proto_forests
				has_modifier = gpm_artificial_core
				has_modifier = gpm_ecological_nervous_system
				has_modifier = gpm_odd_cloud_shapes
				has_deposit = d_central_spire
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_remnants
				has_modifier = gpm_precursor_mechs
				has_modifier = gpm_precursor_singularity_drive
				has_modifier = gpm_precursor_outpost_ruins
				has_modifier = gpm_precursor_obelisks
				has_modifier = gpm_relic_laboratories
				has_modifier = gpm_time_displaced_planet
			}
		}
		modifier = {
			add = 1
			num_buildings = { type = building_research_lab_1 value >= 2 }
		}
		modifier = {
			add = 2
			num_buildings = { type = building_research_lab_1 value >= 3 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_research_lab_1 value >= 4 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_research_lab_1 value >= 5 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_research_lab_2 value >= 1 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_research_lab_2 value >= 2 }
		}
		modifier = {
			add = 5
			num_buildings = { type = building_research_lab_3 value >= 1 }
		}
	}
}

# Ecumenpolis Trade, #PD
col_ecu_trade = {
	icon = 1

	potential = {
		OR = {
		is_planet_class = pc_city
		uses_district_set = pdecocity
		uses_district_set = pdcorpoarc
		}
	}
	
	planet_modifier = {
		trade_value_mult = 0.25
	}

	weight_modifier = {
		modifier = {
			add = 2
			has_designation = col_ecu_research
		}
	}
}

# Machine World
col_mac = {
	icon = 1

	potential = {
		uses_district_set = machine_world
	}


	planet_modifier = {
		planet_district_mining_uncapped_build_speed_mult = 0.25
		planet_district_generator_uncapped_build_speed_mult = 0.25
		planet_jobs_simple_drone_produces_mult = 0.05
	}

	weight_modifier = {
		base = 10
		modifier = {
			add = 5
			has_designation = col_ecu_trade
		}
		modifier = {
			add = 3
			num_districts = { type = district_arcology_trade_jph value >= 2 }
		}
		modifier = {
			add = 5
			num_districts = { type = district_arcology_trade_jph value >= 3 }
		}
		modifier = {
			add = 2
			num_buildings = { type = building_commercial_zone value >= 2 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_commercial_zone value >= 3 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_commercial_zone value >= 4 }
		}
		modifier = {
			add = 5
			num_buildings = { type = building_commercial_zone value >= 5 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_commercial_megaplex value >= 1 }
		}
		modifier = {
			add = 5
			num_buildings = { type = building_commercial_megaplex value >= 2 }
		}
		modifier = {
			add = 10
			num_buildings = { type = building_galactic_stock_exchange value = 1 }
		}
		modifier = {
			add = 10
			OR = {
				num_districts = { type = district_arcology_trade_jph value >= 4 }
				OR = {
					num_buildings = { type = building_commercial_zone value >= 5 }
					num_buildings = { type = building_commercial_megaplex value >= 5 }
				}
			}
		}
	}
}

# Machine World Foundry
col_mac_foundry = {
	icon = 5

	potential = {
		uses_district_set = machine_world
	}


	planet_modifier = {
		custom_tooltip = col_foundry_custom
		planet_district_industrial_build_speed_mult = 0.25
		planet_metallurgists_upkeep_mult = -0.2
	}

	weight_modifier = {
		base = 10
		modifier = {
			add = 5
			owner = { has_monthly_income = { resource = alloys value < 100 } }
		}
		modifier = {
			add = 5
			has_designation = col_mac_foundry
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_spaceship_graveyard
				has_modifier = gpm_radioactive_mantle
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_manufactorium
				has_modifier = gpm_relic_factories
			}
		}
		modifier = {
			add = 2
			has_building = building_foundry_1
		}
		modifier = {
			add = 4
			has_building = building_foundry_2
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= @built_districts_medium_threshold }
		}
		modifier = {
			factor = 0
			NOT = { num_districts = { type = district_industrial value >= @built_districts_medium_threshold } }
			num_buildings = { type = building_foundry_1 value = 0 }
			num_buildings = { type = building_foundry_2 value = 0 }
		}
	}
}

# Machine World Factory
col_mac_factory = {
	icon = 6

	potential = {
		OR = {
			uses_district_set = machine_world
			uses_district_set = pdmachinefactory
		}
		owner = { has_civic = civic_machine_servitor }
	}


	planet_modifier = {
		custom_tooltip = col_factory_custom
		planet_district_industrial_build_speed_mult = 0.25
		planet_artisans_upkeep_mult = -0.2
	}

	weight_modifier = {
		base = 10
		modifier = {
			add = 5
			owner = { has_monthly_income = { resource = consumer_goods value < 100 } }
		}
		modifier = {
			add = 5
			has_designation = col_mac_factory
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_exotic_spices
				has_modifier = gpm_delicious_ingredients
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_manufactorium
				has_modifier = gpm_relic_factories
			}
		}
		modifier = {
			add = 2
			has_building = building_factory_1
		}
		modifier = {
			add = 4
			has_building = building_factory_2
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= @built_districts_medium_threshold }
		}
		modifier = {
			factor = 0
			NOT = { num_districts = { type = district_industrial value >= @built_districts_medium_threshold } }
			num_buildings = { type = building_factory_1 value = 0 }
			num_buildings = { type = building_factory_2 value = 0 }
		}
	}
}

# Hive World
col_hiv = {
	icon = 1

	potential = {
		OR = {
			uses_district_set = hive_world
			#uses_district_set = pdbioforge
			#uses_district_set = pdfloraforge
		}
	}

	planet_modifier = {
		planet_district_mining_uncapped_build_speed_mult = 0.25
		planet_district_farming_uncapped_build_speed_mult = 0.25
		planet_district_generator_uncapped_build_speed_mult = 0.25
		planet_jobs_simple_drone_produces_mult = 0.05
	}

	weight_modifier = {
		base = 10
	}
}

# Hive World Foundry
col_hiv_foundry = {
	icon = 5

	potential = {
		OR = {
			uses_district_set = hive_world
			#uses_district_set = pdbioforge
			#uses_district_set = pdfloraforge
		}
	}

	planet_modifier = {
		planet_district_industrial_build_speed_mult = 0.25
		planet_metallurgists_upkeep_mult = -0.20
	}

	weight_modifier = {
		base = 10
		modifier = {
			add = 5
			owner = { has_monthly_income = { resource = alloys value < 100 } }
		}
		modifier = {
			add = 5
			has_designation = col_hiv_foundry
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_spaceship_graveyard
				has_modifier = gpm_radioactive_mantle
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_manufactorium
				has_modifier = gpm_relic_factories
			}
		}
		modifier = {
			add = 2
			has_building = building_foundry_1
		}
		modifier = {
			add = 4
			has_building = building_foundry_2
		}
		modifier = {
			add = 5
			num_districts = { type = district_industrial value >= @built_districts_medium_threshold }
		}
		modifier = {
			factor = 0
			NOT = { num_districts = { type = district_industrial value >= @built_districts_medium_threshold } }
			num_buildings = { type = building_foundry_1 value = 0 }
			num_buildings = { type = building_foundry_2 value = 0 }
		}
	}
}

# Bureaucratic Center

col_bureau = {
	icon = 28

	potential = {
		exists = owner
		owner = { is_regular_empire = yes }
		NOR = {
			uses_district_set = hive_world
			uses_district_set = pdbioforge
			uses_district_set = pdfloraforge
			uses_district_set = pdmilarc
			uses_district_set = pdbiocapital
		}
		is_special_colony_type = no
	}
	planet_modifier = {
		custom_tooltip = col_bureaucracy_custom
		planet_bureaucrats_upkeep_mult = -0.10
		pop_ethics_shift_speed_mult = -0.20
	}

	weight_modifier = {
		base = 10 # 1
		modifier = {
			add = 3 # 5
			owner = { empire_sprawl_over_cap > 20 } #30
		}
		modifier = {
			add = 3 # 15 #5
			has_designation = col_bureau
		}
		modifier = {
			add = 20
			OR = {
				has_modifier = gpm_precursor_remnants
				has_modifier = gpm_precursor_city
				has_modifier = gpm_precursor_floating_city
				has_modifier = gpm_precursor_prison_planet
				has_modifier = gpm_relic_lower_levels
				has_modifier = gpm_cities_in_the_sky
			}
		}
		modifier = {
			add = 40
			OR = {
				has_modifier = gpm_precursor_capital_complex
				has_modifier = gpm_precursor_communication_hub
			}
		}
		modifier = {
			add = 2 #3
			num_buildings = { type = building_bureaucratic_1 value >= 2 }
		}
		modifier = {
			add = 2
			num_buildings = { type = building_bureaucratic_1 value >= 3 }
		}
		modifier = {
			add = 2
			num_buildings = { type = building_bureaucratic_1 value >= 4 }
		}
		modifier = {
			add = 2
			num_buildings = { type = building_bureaucratic_1 value >= 5 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_bureaucratic_2 value >= 1 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_bureaucratic_2 value >= 2 }
		}
###Aripatch
		modifier = {
			add = 5
			num_buildings = { type = building_bureaucratic_3 value >= 1 }
		}
		modifier = {
			add = 6
			num_buildings = { type = building_bureaucratic_3 value >= 2 }
###
		}
		modifier = {
			factor = 0
			num_buildings = { type = building_bureaucratic_1 value = 0 }
			num_buildings = { type = building_bureaucratic_2 value = 0 }
###Aripatch
			num_buildings = { type = building_bureaucratic_3 value = 0 }
###
		}
		modifier = {
			factor = 1.3
			has_planet_flag = str_acceptable_habitability
		}		
	}
}

# PD Complex Hive Planets
col_pd_hive = {
	icon = 1

	potential = {
		OR = {
			is_planet_class = pc_bioforge
			is_planet_class = pc_megafloraforge
			is_planet_class = pc_biofort
			is_planet_class = pc_megaflorafort
			uses_district_set = pdbiocapital
			uses_district_set = pdfloracapital
		}
		exists = owner
		owner = { is_hive_empire = yes }
		is_special_colony_type = no
	}
	
	planet_modifier = {
		planet_districts_cost_mult = -0.10
		planet_jobs_complex_drone_produces_mult = 0.05
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_bioforge_maintenance value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdhivefort_synapse value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdhive value >= @free_districts_medium_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_bioforge_maintenance value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdhivefort_synapse value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdhive value >= @free_districts_high_threshold }
		}
		modifier = {
			add = 5
			has_modifier = natural_beauty
		}
		modifier = {
			add = 5
			num_districts = { type = district_hive value >= @built_districts_high_threshold }
		}
	}
}


# PD Special Nexus Planet
col_pd_nexus = {
	icon = 1

	potential = {
		OR = {
			uses_district_set = pdmachinefactory
			uses_district_set = pdmachinefort
			uses_district_set = pdmachinecapital
		}
		exists = owner
		owner = { is_machine_empire = yes }
		is_special_colony_type = no
	}
	
	planet_modifier = {
		planet_districts_cost_mult = -0.10
		planet_jobs_complex_drone_produces_mult = 0.05
	}

	weight_modifier = {
		modifier = {
			add = 1
			num_free_districts = { type = district_mf_replicator value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdmachinefort_naval value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdmachinefort_synapse value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdnexus value >= @free_districts_medium_threshold }
		}
		modifier = {
			add = 3
			num_free_districts = { type = district_mf_replicator value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdmachinefort_naval value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdmachinefort_synapse value < @free_districts_low_threshold }
			num_free_districts = { type = district_pdnexus value >= @free_districts_high_threshold }
		}
		modifier = {
			add = 5
			has_modifier = natural_beauty
		}
		modifier = {
			add = 5
			num_districts = { type = district_pdnexus value >= @built_districts_high_threshold }
		}
	}
}


# PD Fortress Planet
col_pd_fortress = {
	icon = 9

	potential = {
		is_planet_class = pc_milarc
		exists = owner
		is_special_colony_type = no
	}
	
	planet_modifier = {
		planet_jobs_upkeep_mult = -0.05
		planet_districts_cost_mult = -0.1
	}

	weight_modifier = {
		modifier = {
			add = 5
			has_designation = col_pd_fortress
		}
		modifier = {
			add = 3
			num_buildings = { type = building_stronghold value >= 2 }
		}
		modifier = {
			add = 4
			num_buildings = { type = building_stronghold value >= 3 }
		}
		modifier = {
			add = 5
			num_buildings = { type = building_stronghold value >= 4 }
		}
		modifier = {
			add = 3
			num_buildings = { type = building_fortress value >= 1 }
		}
		modifier = {
			add = 5
			num_buildings = { type = building_fortress value >= 2 }
		}
		modifier = {
			add = 10
			is_planet_class = pc_milarc
		}
	}
}