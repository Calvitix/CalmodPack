# Giga File
#
# Calvitix Check 3.2
#
# Last Update : 09.01.2022
#
giga_fe_mega_xenophobe_neutron_star = {
	class = sc_neutron_star
	
	max_instances = 1
	
	planet = {
		class = star
		orbit_distance = 0
	}
	
	planet = {
		class = rl_unhabitable_planets
		count = { min = 1 max = 6 }
		orbit_distance = 50
		orbit_angle = { min = 90 max = 270 }
		
		change_orbit = @base_moon_distance
		
		moon = {
			class = rl_unhabitable_planets
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}
	
	init_effect = {
		create_starbase = {
			owner = event_target:xenophobic_fe
			size = starbase_outpost
		}
		starbase = {
			while = {
				count = 6
				create_ship = {
					name = random
					design = NAME_Devastator
					prefix = yes
				}
			}
		}
		random_system_planet = {
			limit = { is_star = yes }
			solar_system = {
				random_list = {
					2 = {
						spawn_megastructure = {
							type = neutronium_gigaforge_ruined #might want to be changed
							planet = PREV
							owner = event_target:xenophobic_fe
						}
					}
					1 = {
						spawn_megastructure = {
							type = neutronium_gigaforge_2 #might want to be changed
							planet = PREV
							owner = event_target:xenophobic_fe
						}
					}
				}

				random_list = {
					1 = {
						spawn_megastructure = {
							type = particle_accelerator_1
							planet = PREV
							owner = event_target:xenophobic_fe
						}
						modifier = {
							factor = 0
							has_global_flag = accelerator_disabled
						}
					}
					1 = {
						spawn_megastructure = {
							type = particle_accelerator_ruined
							planet = PREV
							owner = event_target:xenophobic_fe
						}
						modifier = {
							factor = 0
							has_global_flag = accelerator_disabled
						}
					}
					1 = {}
				}
				random_list = {
					1 = {
						random_system_planet = {
							limit = { is_star = no is_moon = no is_asteroid = no }
							solar_system = {
								spawn_megastructure = {
									type = macro_test_site_ruined
									planet = PREV
									owner = event_target:xenophobic_fe
								}
							}
						}
						modifier = {
							factor = 0
							has_global_flag = megabase_disabled
						}
					}
					1 = {
						random_system_planet = {
							limit = { is_star = no is_moon = no is_asteroid = no }
							solar_system = {
								spawn_megastructure = {
									type = macro_test_site_1
									planet = PREV
									owner = event_target:xenophobic_fe
								}
							}
						}
						modifier = {
							factor = 0
							has_global_flag = megabase_disabled
						}
					}
					1 = {}
				}
			}
		}
		every_system_planet = {
			limit = { has_deposit = yes }
			if = {
				limit = { has_deposit_for = shipclass_mining_station }
				create_mining_station = { owner = event_target:xenophobic_fe }
			}
			else_if = {
				limit = { has_deposit_for = shipclass_research_station }
				create_research_station = { owner = event_target:xenophobic_fe }
			}
		}
	}
}