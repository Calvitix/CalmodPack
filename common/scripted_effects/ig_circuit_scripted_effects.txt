# I spent a lot of time on this mod out of my own free time, and nobody would like it if someone took their creation
# and stole it, and tried to claim it as thier's. If you want to learn to mod Stellaris, I'm not the best person to
# ask, but I'm always open to help and if you'd like to make new features or add-ons to this mod, send me a message,
# and we'll discuss together about either integrating them into this mod, or creating an add-on to this one.

remove_infinity_circuit_modifiers = {
    if = {
        limit = { NOT = { has_modifier = power_stone } }
        remove_modifier = "infinity_circuit_power_space"
        remove_modifier = "infinity_circuit_mind_power"
    }
    if = {
        limit = { NOT = { has_modifier = time_stone } }
        remove_modifier = "infinity_circuit_space_time"
        remove_modifier = "infinity_circuit_time_reality_one"
        remove_modifier = "infinity_circuit_time_reality_two"
        remove_modifier = "infinity_circuit_time_reality_three"
    }
    if = {
        limit = { NOT = { has_modifier = reality_stone } }
        remove_modifier = "infinity_circuit_reality_soul_one"
        remove_modifier = "infinity_circuit_reality_soul_two"
        remove_modifier = "infinity_circuit_reality_soul_three"
        remove_modifier = "infinity_circuit_reality_soul_four"
        remove_modifier = "infinity_circuit_reality_soul_five"
        remove_modifier = "infinity_circuit_time_reality_one"
        remove_modifier = "infinity_circuit_time_reality_two"
        remove_modifier = "infinity_circuit_time_reality_three"
    }
    if = {
        limit = { NOT = { has_modifier = soul_stone } }
        remove_modifier = "infinity_circuit_reality_soul_one"
        remove_modifier = "infinity_circuit_reality_soul_two"
        remove_modifier = "infinity_circuit_reality_soul_three"
        remove_modifier = "infinity_circuit_reality_soul_four"
        remove_modifier = "infinity_circuit_reality_soul_five"
        remove_modifier = "infinity_circuit_soul_mind"
    }
    if = {
        limit = { NOT = { has_modifier = mind_stone } }
        remove_modifier = "infinity_circuit_mind_power"
        remove_modifier = "infinity_circuit_soul_mind"
    }
    if = {
        limit = { NOT = { has_modifier = space_stone } }
        remove_modifier = "infinity_circuit_power_space"
        remove_modifier = "infinity_circuit_space_time"
    }
}

infinity_circuit_apply_modifier = {
    if = {
        limit = { NOT = { has_global_flag = menu_infinity_circuit_disabled } }
        if = {
            limit = {
                has_modifier = power_stone
                has_modifier = space_stone
                not_has_infinity_circuit_power_space_modifier = yes
                NOT = { has_country_flag = power_space_combo_open }
            }
            country_event = { id = infinity_circuit.11 }
            set_country_flag = power_space_combo_open
        }
        if = {
            limit = {
                has_modifier = space_stone
                has_modifier = time_stone
                not_has_infinity_circuit_space_time_modifier = yes
                NOT = { has_country_flag = space_time_combo_open }
            }
            country_event = { id = infinity_circuit.21 }
            set_country_flag = space_time_combo_open
        }
        if = {
            limit = {
                has_modifier = time_stone
                has_modifier = reality_stone
                not_has_infinity_circuit_time_reality_modifier = yes
                NOT = { has_country_flag = time_reality_combo_open }
            }
            country_event = { id = infinity_circuit.31 }
            set_country_flag = time_reality_combo_open
        }
        if = {
            limit = {
                has_modifier = reality_stone
                has_modifier = soul_stone
                not_has_infinity_circuit_reality_soul_modifier = yes
                NOT = { has_country_flag = reality_soul_combo_open }
            }
            country_event = { id = infinity_circuit.41 }
            set_country_flag = reality_soul_combo_open
        }
        if = {
            limit = {
                has_modifier = soul_stone
                has_modifier = mind_stone
                not_has_infinity_circuit_soul_mind_modifier = yes
                NOT = { has_country_flag = soul_mind_combo_open }
            }
            country_event = { id = infinity_circuit.51 }
            set_country_flag = soul_mind_combo_open
        }
        if = {
            limit = {
                has_modifier = mind_stone
                has_modifier = power_stone
                not_has_infinity_circuit_mind_power_modifier = yes
                NOT = { has_country_flag = mind_power_combo_open }
            }
            country_event = { id = infinity_circuit.61 }
            set_country_flag = mind_power_combo_open
        }
    }
}