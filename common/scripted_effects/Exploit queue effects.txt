#Planet Scope
colonize_exploit_planet = {
	if = {
		limit = {
			NOT = { has_modifier = colonized_planet }
		}
		add_modifier = { modifier = colonized_planet }
	
		set_variable = { which = var_exploitation_size value = 0 }
		new_colony_setup = yes
		breakdown_deposits = yes
		exploit_size_set = yes
		if = {
			limit = {
				OR = {
					is_planet_class = pc_gas_giant
					is_planet_class = pc_asteroid
					is_planet_class = pc_ice_asteroid
				}
			}
			#log = "Define Size set"		
			exploit_size_set = yes
		}
		#log = "Apply Colony cost"		
		if = {
			limit = {
				is_base_planet = yes
				base_planet_cost_check = yes
					}
			space_owner = {
				add_resource = {
					energy = @NegBaseEnergyCost
					alloys = @NegBaseAlloyCost
					minerals = @NegBaseMineralCost
				}
			}
		}
		else_if = {
			limit = {
				is_difficult_planet = yes
				difficult_planet_cost_check = yes
					}
			space_owner = {
				add_resource = {
					energy = @NegDifficultEnergyCost
					alloys = @NegDifficultAlloyCost
					minerals = @NegDifficultMineralCost
				}
			}
		}
		else_if = {
			limit = {
				is_vacuum_planet = yes
				vacuum_planet_cost_check = yes
					}
			space_owner = {
				add_resource = {
					energy = @NegVacuumEnergyCost
					alloys = @NegVacuumAlloyCost
					minerals = @NegVacuumMineralCost
				}
			}
		}
		if = {
			limit = {
				OR = {
					has_perm_flag = yes
					owner = { has_country_flag = flg_exploit_automation }
				}
			}
			#log = "Launch ai_colony_switch"
			ai_colony_switch = yes
		}
		#log = "End of Colonise_exploit_planet"
	}
}

#Country Scope
mark_systems_develop = {
	#Calvitix 
	if = {
		limit = {
			NOT = { has_country_flag = recent_exploit_apply }			
			exists = space_owner
			space_owner = { 
				is_ai = yes 
				not = { has_country_flag = flg_exploit_ai_off } 
			}
		}
		#log = "Setting AI Queue for [space_owner.GetName]"
		set_AI_queue = yes
	}
	
	set_timed_country_flag = { flag = recent_exploit_apply days = 30 }
	if = {
		limit = {
			OR = {
				NOT = { has_country_flag = flg_exploit_spread }
				has_country_flag = flg_exploit_spread_failed
			}
			any_system_within_border = {
				system_has_exploit = yes
				#any_system_planet = {
					system_has_colonizable_planet = yes
				#}
			}
		}
		#log = "mark_systems_develop 1 : has_exploit ok "

		
		
		if = {
			limit = {
				has_country_flag = flg_exploit_automation
				check_variable = { which = var_exploitation_centers value > 0 }
			}
			#log  = "flg_exploit_automation & exploitation_centers > 0 "

			random_system_within_border = {
				limit = {
					OR = {
						any_system_planet = {
							is_hosting_exploit = yes
						}
						has_star_flag = flg_exploit_queue_expand
					}
					#any_system_planet = {
						system_has_colonizable_planet = yes
					#}
				}
				set_star_flag = flg_exploit_colonize_target
				#log = "setting starflag : colonize_target ok"
				
				while = {
					limit = {
						PREV = { check_variable = { which = var_exploitation_centers value > 0 } }
						#any_system_planet = {
						system_has_colonizable_planet = yes
						#}
					}
					PREV = { change_variable = { which = var_exploitation_centers value = -1 } }
					random_system_planet = {
						limit = {
							NOT = { has_modifier = colonized_planet }
							has_exploit_technology = yes
							can_build_exploit_colony = yes
							system_has_colonizable_planet = yes							
						}
						set_planet_flag = flg_exploit_colonize_target
						#log = "setting planetflag : colonize_target ok"

					}
				}
				if = {
					limit = {
						PREV = { check_variable = { which = var_exploitation_centers value > 0 } }
						NOT = { 
							#any_system_planet = {
								system_has_colonizable_planet = yes
							#}
						}
					}
					#log  = "mark_systems_develop  : Set another exploitAI.1 in 7 days"					
					PREV = { country_event = { id = spaceexploitAI.1 days = 7 } }
				}
			}
		}
		else_if = { #TODO Select a system to do all the development in, leave colonies for later.
			limit = {
				NOT = { has_country_flag = flg_exploit_automation }
				has_exploit_queue = yes
			}
			#log = "Not flg_exploit_automation or has_exploit_queue ok"
			random_system_within_border = {
				limit = {
					OR = {
						any_system_planet = {
							is_hosting_exploit = yes
						}
						has_star_flag = flg_exploit_queue_expand
					}
					#any_system_planet = {
						system_has_colonizable_planet = yes
					#}
				}
				#log = "Ok to check the queue, flg_exploit_queue_expand ok"
				while = {
					count = 5
					limit = {
						PREV = { check_variable = { which = var_exploit_power_plant_queue value > 0 } }
						any_system_planet = {
							system_has_colonizeable_power_plant_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					PREV = { change_variable = { which = var_exploit_power_plant_queue value = -1 } }
					log = "1 power plant in Queue"
					if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_power_plant_planet = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_power_plant_planet = yes	
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_power_plant_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_power_plant_planet = yes
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_power_plant_planet = yes	
								has_deposit = no
							}
							set_planet_flag = flg_exploit_power_plant_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
				while = {
					count = 5
					limit = {		
						PREV = { check_variable = { which = var_exploit_minerals_mine_queue value > 0 } }
						any_system_planet = {
							system_has_colonizeable_minerals_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					PREV = { change_variable = { which = var_exploit_minerals_mine_queue value = -1 } }
					if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_minerals_mine_planet = yes	
								has_mineral_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_minerals_mine_planet = yes	
								has_mineral_deposit = yes
							}
							set_planet_flag = flg_exploit_minerals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
							#log = "set flg_exploit_minerals_mine_loop opt1"							
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_minerals_mine_planet = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_minerals_mine_planet = yes	
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_minerals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
							#log = "set flg_exploit_minerals_mine_loop opt2"							
						}						
						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_minerals_mine_planet = yes	
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_minerals_mine_planet = yes	
								has_deposit = no
							}
							set_planet_flag = flg_exploit_minerals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
							#log = "set flg_exploit_minerals_mine_loop opt3"
						}
					}
				}
				while = {
					count = 5
					limit = {
						PREV = { check_variable = { which = var_exploit_alloys_mine_queue value > 0 } }
						any_system_planet = {
							system_has_colonizeable_alloys_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					PREV = { change_variable = { which = var_exploit_alloys_mine_queue value = -1 } }
					if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_alloys_mine_planet = yes	
								has_alloy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_alloys_mine_planet = yes	
								has_alloy_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_alloys_mine_planet = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_alloys_mine_planet = yes	
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_alloys_mine_planet = yes	
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_alloys_mine_planet = yes	
								has_deposit = no
							}
							set_planet_flag = flg_exploit_alloys_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
				while = {
					count = 5
					limit = {
						PREV = { check_variable = { which = var_exploit_alloys_foundry_queue value > 0 } }
						any_system_planet = {
							system_has_colonizeable_alloys_foundry_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					PREV = { change_variable = { which = var_exploit_alloys_foundry_queue value = -1 } }
					if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_alloys_foundry_planet = yes	
								has_alloy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_alloys_foundry_planet = yes	
								has_alloy_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_foundry_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_alloys_foundry_planet = yes	
								has_mineral_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_alloys_foundry_planet = yes	
								has_mineral_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_foundry_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_alloys_foundry_planet = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_alloys_foundry_planet = yes	
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_foundry_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_alloys_foundry_planet = yes	
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_alloys_foundry_planet = yes	
								has_deposit = no
							}
							set_planet_flag = flg_exploit_alloys_foundry_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
				while = {
					count = 5
					limit = {
						PREV = { check_variable = { which = var_exploit_lava_refinery_queue value > 0 } }
						any_system_planet = {
							system_has_colonizeable_lava_refinery_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					PREV = { change_variable = { which = var_exploit_lava_refinery_queue value = -1 } }
					random_system_planet = {
						limit = {
							system_has_colonizeable_lava_refinery_planet = yes				
						}
						set_planet_flag = flg_exploit_lava_refinery_loop
						set_planet_flag = flg_exploit_colonize_target
					}
				}
				while = {
					count = 5
					limit = {
						PREV = { check_variable = { which = var_exploit_research_lab_queue value > 0 } }
						any_system_planet = {
							system_has_colonizeable_research_lab_planet = yes
							OR = {
								NOT = { has_deposit_for = shipclass_mining_station }
								has_energy_deposit = yes
							}
						}
					}
					PREV = { change_variable = { which = var_exploit_research_lab_queue value = -1 } }
					if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_research_lab_planet = yes	
								has_deposit_for = shipclass_research_station
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_research_lab_planet = yes	
								has_deposit_for = shipclass_research_station
							}
							set_planet_flag = flg_exploit_research_lab_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_research_lab_planet = yes	
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_research_lab_planet = yes	
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_research_lab_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_research_lab_planet = yes	
								has_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_research_lab_planet = yes	
								has_deposit = yes
							}
							set_planet_flag = flg_exploit_research_lab_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
				}
				while = {
					count = 5
					limit = {
						PREV = { check_variable = { which = var_exploit_motes_mine_queue value > 0 } }
						any_system_planet = {
							system_has_colonizeable_motes_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
						owner = { has_technology = tech_mine_volatile_motes }
					}
					PREV = { change_variable = { which = var_exploit_motes_mine_queue value = -1 } }
					if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_motes_mine_planet = yes	
								has_motes_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_motes_mine_planet = yes	
								has_motes_deposit = yes
							}
							set_planet_flag = flg_exploit_motes_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_motes_mine_planet = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_motes_mine_planet = yes	
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_motes_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_motes_mine_planet = yes	
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_motes_mine_planet = yes	
								has_deposit = no
							}
							set_planet_flag = flg_exploit_motes_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
				while = {
					count = 5
					limit = {
						PREV = { check_variable = { which = var_exploit_gases_well_queue value > 0 } }
						any_system_planet = {
							system_has_colonizeable_gases_well_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
						owner = { has_technology = tech_mine_exotic_gases }
					}
					PREV = { change_variable = { which = var_exploit_gases_well_queue value = -1 } }
					if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_gases_well_planet = yes	
								has_gas_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_gases_well_planet = yes	
								has_gas_deposit = yes
							}
							set_planet_flag = flg_exploit_gases_well_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_gases_well_planet = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_gases_well_planet = yes	
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_gases_well_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_gases_well_planet = yes	
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_gases_well_planet = yes	
								has_deposit = no
							}
							set_planet_flag = flg_exploit_gases_well_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
				while = {
					count = 5
					limit = {
						PREV = { check_variable = { which = var_exploit_crystals_mine_queue value > 0 } }
						any_system_planet = {
							system_has_colonizeable_crystals_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
						owner = { has_technology = tech_mine_rare_crystals }
					}
					PREV = { change_variable = { which = var_exploit_crystals_mine_queue value = -1 } }
					if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_crystals_mine_planet = yes	
								has_crystal_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_crystals_mine_planet = yes	
								has_crystal_deposit = yes
							}
							set_planet_flag = flg_exploit_crystals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_crystals_mine_planet = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_crystals_mine_planet = yes	
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_crystals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}						
					}
					else_if = {
						limit = {
							any_system_planet = {
								system_has_colonizeable_crystals_mine_planet = yes	
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								system_has_colonizeable_crystals_mine_planet = yes	
								has_deposit = no
							}
							set_planet_flag = flg_exploit_crystals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						has_country_flag = flg_exploit_automation
						check_variable = { which = var_exploitation_centers value > 0 }
					}
					has_exploit_queue = yes
				}
			}
			#log  = "mark_systems_develop after flag : Set another exploitAI.1 in 14 days"					
			country_event = { id = spaceexploitAI.1 days = 14 }
		}
		remove_country_flag = flg_exploit_spread_failed
	}
	else_if = {
		limit = {
			NOT = { has_country_flag = flg_exploit_spread }
			any_system_within_border = {
				system_has_viable_exploit_host = yes
				any_system_planet = {
					system_has_colonizable_planet = yes
				}
			}
		}
		#log = "mark_systems_develop : not Spread and viable exploit host"							
		random_system_within_border = {
			limit = {
				system_has_viable_exploit_host = yes
				any_system_planet = {
					system_has_colonizable_planet = yes
				}
			}
			set_star_flag = flg_exploit_queue_expand
			#log = "set_star_flag : flg_exploit_queue_expand OK"	
		}
		#log  = "mark_systems_develop after flag not Spread & flg_exploit_queue_expand : Set another exploitAI.1 in 7 days"					
		country_event = { id = spaceexploitAI.1 days = 7 }
	}
	else_if = {
		limit = {
			has_country_flag = flg_exploit_spread
			any_system_within_border = {
				system_has_viable_exploit_host = yes
				system_has_colonizable_planet = yes
			}
		}
		#log = "mark_systems_develop : spread"							
		if = {
			limit = {
				has_country_flag = flg_exploit_automation
				check_variable = { which = var_exploitation_centers value > 0 }
			}
			while = {
				limit = {
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizable_planet = yes
						}
					}
					check_variable = { which = var_exploitation_centers value > 0 }
				}
				change_variable = { which = var_exploitation_centers value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizable_planet = yes
						}
					}
					random_system_planet = {
						limit = {
							system_has_colonizable_planet = yes					
						}
						set_planet_flag = flg_exploit_colonize_target
					}
				}
			}
		}
		else_if = { #TODO Mark the systems only, not mark the colony in each one.
			limit = {
				NOT = { has_country_flag = flg_exploit_automation }
				has_exploit_queue = yes
				any_system_within_border = {
					system_has_viable_exploit_host = yes
					any_system_planet = {
						system_has_colonizable_planet = yes
					}
				}
			}
			while = {
				count = 5
				limit = {
					check_variable = { which = var_exploit_power_plant_queue value > 0 }
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_power_plant_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
				}
				change_variable = { which = var_exploit_power_plant_queue value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_power_plant_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_power_plant_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_power_plant_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_power_plant_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_power_plant_planet = yes
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_power_plant_planet = yes
								has_deposit = no
							}
							set_planet_flag = flg_exploit_power_plant_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
			}
			while = {
				count = 5
				limit = {		
					check_variable = { which = var_exploit_minerals_mine_queue value > 0 }
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_minerals_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
				}
				change_variable = { which = var_exploit_minerals_mine_queue value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_minerals_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					if = {
						limit = {
							any_system_planet = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_minerals_mine_planet = yes
								has_mineral_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_minerals_mine_planet = yes
								has_mineral_deposit = yes
							}
							set_planet_flag = flg_exploit_minerals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_minerals_mine_planet = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_minerals_mine_planet = yes
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_minerals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_minerals_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_minerals_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
							set_planet_flag = flg_exploit_minerals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
			}
			while = {
				count = 5
				limit = {
					check_variable = { which = var_exploit_alloys_mine_queue value > 0 }
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_alloys_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
				}
				change_variable = { which = var_exploit_alloys_mine_queue value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_alloys_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_alloys_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_alloy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_alloys_mine_planet = yes
								has_alloy_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_alloys_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_alloys_mine_planet = yes
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_alloys_mine_planet = yes
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_alloys_mine_planet = yes
								has_deposit = no
							}
							set_planet_flag = flg_exploit_alloys_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
			}
			while = {
				count = 5
				limit = {
					check_variable = { which = var_exploit_alloys_foundry_queue value > 0 }
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizable_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
				}
				change_variable = { which = var_exploit_alloys_foundry_queue value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizable_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					if = {
						limit = {
							any_system_planet = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizable_planet = yes
								has_alloy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizable_planet = yes
								has_alloy_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_foundry_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizable_planet = yes
								has_mineral_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizable_planet = yes
								has_mineral_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_foundry_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizable_planet = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizable_planet = yes
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_alloys_foundry_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizable_planet = yes
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizable_planet = yes
								has_deposit = no
							}
							set_planet_flag = flg_exploit_alloys_foundry_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
			}
			while = {
				count = 5
				limit = {
					check_variable = { which = var_exploit_lava_refinery_queue value > 0 }
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_lava_refinery_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
				}
				change_variable = { which = var_exploit_lava_refinery_queue value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_lava_refinery_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					random_system_planet = {
						limit = {
							system_has_colonizeable_lava_refinery_planet = yes	
							NOT = { has_deposit_for = shipclass_research_station }				
						}
						set_planet_flag = flg_exploit_lava_refinery_loop
						set_planet_flag = flg_exploit_colonize_target
					}
				}
			}
			while = {
				count = 5
				limit = {
					check_variable = { which = var_exploit_research_lab_queue value > 0 }
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizable_planet = yes
							NOT = { has_deposit_for = shipclass_mining_station }
						}
					}
				}
				change_variable = { which = var_exploit_research_lab_queue value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizable_planet = yes
							OR = {
								NOT = { has_deposit_for = shipclass_mining_station }
								has_energy_deposit = yes
							}
						}
					}
					if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								OR = {
									NOT = { has_deposit_for = shipclass_mining_station }
									has_energy_deposit = yes
								}
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_science_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								OR = {
									NOT = { has_deposit_for = shipclass_mining_station }
									has_energy_deposit = yes
								}
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_science_deposit = yes
							}
							set_planet_flag = flg_exploit_research_lab_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								OR = {
									NOT = { has_deposit_for = shipclass_mining_station }
									has_energy_deposit = yes
								}
								system_has_colonizable_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								OR = {
									NOT = { has_deposit_for = shipclass_mining_station }
									has_energy_deposit = yes
								}
								system_has_colonizable_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_research_lab_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								OR = {
									NOT = { has_deposit_for = shipclass_mining_station }
									has_energy_deposit = yes
								}
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								OR = {
									NOT = { has_deposit_for = shipclass_mining_station }
									has_energy_deposit = yes
								}
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
							set_planet_flag = flg_exploit_research_lab_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
			}
			while = {
				count = 5
				limit = {
					check_variable = { which = var_exploit_motes_mine_queue value > 0 }
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_motes_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					owner = { has_technology = tech_mine_volatile_motes }
				}
				change_variable = { which = var_exploit_motes_mine_queue value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_motes_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_motes_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_gas_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_motes_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_gas_deposit = yes
							}
							set_planet_flag = flg_exploit_motes_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_motes_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_motes_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_motes_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_motes_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_motes_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
							set_planet_flag = flg_exploit_motes_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
			}
			while = {
				count = 5
				limit = {
					check_variable = { which = var_exploit_gases_well_queue value > 0 }
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_gases_well_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					owner = { has_technology = tech_mine_exotic_gases }
				}
				change_variable = { which = var_exploit_gases_well_queue value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_gases_well_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_gases_well_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_gas_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_gases_well_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_gas_deposit = yes
							}
							set_planet_flag = flg_exploit_gases_well_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_gases_well_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_gases_well_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_gases_well_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_gases_well_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_gases_well_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
							set_planet_flag = flg_exploit_gases_well_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
			}
			while = {
				count = 5
				limit = {
					check_variable = { which = var_exploit_crystals_mine_queue value > 0 }
					any_system_within_border = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_crystals_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					owner = { has_technology = tech_mine_rare_crystals }
				}
				change_variable = { which = var_exploit_crystals_mine_queue value = -1 }
				random_system_within_border = {
					limit = {
						system_has_viable_exploit_host = yes
						any_system_planet = {
							system_has_colonizeable_crystals_mine_planet = yes
							NOT = { has_deposit_for = shipclass_research_station }
						}
					}
					if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_crystals_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_crystal_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_crystals_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_crystal_deposit = yes
							}
							set_planet_flag = flg_exploit_crystals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_crystals_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_crystals_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_energy_deposit = yes
							}
							set_planet_flag = flg_exploit_crystals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
					else_if = {
						limit = {
							any_system_planet = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_crystals_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
						}
						random_system_planet = {
							limit = {
								NOT = { has_modifier = colonized_planet }
								NOT = { has_deposit_for = shipclass_research_station }
								system_has_colonizeable_crystals_mine_planet = yes
								has_exploit_technology = yes
								can_build_exploit_colony = yes
								has_deposit = no
							}
							set_planet_flag = flg_exploit_crystals_mine_loop
							set_planet_flag = flg_exploit_colonize_target
						}
					}
				}
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						has_country_flag = flg_exploit_automation
						check_variable = { which = var_exploitation_centers value > 0 }
					}
					has_exploit_queue = yes
				}
			}
			#log  = "mark_systems_develop : Automation or exploit_queue : Set another AI.1 in 88 days"
			country_event = { id = spaceexploitAI.1 days = 88 }
		}
	}
	else = {
		set_country_flag = flg_exploit_spread_failed
		#log = "mark_systems_develop : flg_exploit_spread_failed, Set another AI.1 in 88 days"
		country_event = { id = spaceexploitAI.1 days = 11 }
	}
	#log = "Set AI.2 in 88 days"
	country_event = { id = spaceexploitAI.2 days = 8 }  #TODO Event to distribute selected constructions
}

#Country Scope
calculate_allowed_exploits = {
	set_variable = { which = var_exploitation_centers value = 0 }
	set_country_flag = flg_exploitation_set
	every_owned_planet = {
		limit = {
			is_major_colony = yes
		}
		PREV = { change_variable = { which = var_exploitation_centers value = 3 } }
		if = {
			limit = {
				years_passed > 5
			}
			PREV = { change_variable = { which = var_exploitation_centers value = 1 } }
		}
		if = {
			limit = {
				years_passed > 10
			}
			PREV = { change_variable = { which = var_exploitation_centers value = 1 } }
		}
		if = {
			limit = {
				years_passed > 15
			}
			PREV = { change_variable = { which = var_exploitation_centers value = 1 } }
		}
		if = {
			limit = {
				years_passed > 20
			}
			PREV = { change_variable = { which = var_exploitation_centers value = 1 } }
		}
	}
	if = {
		limit = {
			is_ai = yes
		}
		if = {
			limit = {
				has_global_flag = flg_exploit_speed_difficulty
			}
			switch = {
				trigger = is_difficulty
				0 = {
					multiply_variable = { which = var_exploitation_centers value = 0.5 }
				}
				1 = {
				}
				2 = {
					multiply_variable = { which = var_exploitation_centers value = 2 }
				}
				3 = {
					multiply_variable = { which = var_exploitation_centers value = 3 }
				}
				4 = {
					multiply_variable = { which = var_exploitation_centers value = 4 }
				}
				5 = {
					multiply_variable = { which = var_exploitation_centers value = 5 }
				}
			}
		}
		else_if = {
			limit = {
				has_global_flag = flg_exploit_speed_manual
			}
			switch = {
				trigger = has_global_flag
				exploit_ai_speed_5_neg = {
					divide_variable = { which = var_exploitation_centers value = 6 }
				}
				exploit_ai_speed_4_neg = {
					divide_variable = { which = var_exploitation_centers value = 5 }
				}
				exploit_ai_speed_3_neg = {
					divide_variable = { which = var_exploitation_centers value = 4 }
				}
				exploit_ai_speed_2_neg = {
					divide_variable = { which = var_exploitation_centers value = 3 }
				}
				exploit_ai_speed_1_neg = {
					divide_variable = { which = var_exploitation_centers value = 2 }
				}
				
				exploit_ai_speed_1 = {
					multiply_variable = { which = var_exploitation_centers value = 2 }
				}
				exploit_ai_speed_2 = {
					multiply_variable = { which = var_exploitation_centers value = 3 }
				}
				exploit_ai_speed_3 = {
					multiply_variable = { which = var_exploitation_centers value = 4 }
				}
				exploit_ai_speed_4 = {
					multiply_variable = { which = var_exploitation_centers value = 5 }
				}
				exploit_ai_speed_5 = {
					multiply_variable = { which = var_exploitation_centers value = 6 }
				}
			}
		}
		#else = {
		#}
	}
	every_planet_within_border = {
		limit = {
			has_modifier = colonized_planet
			OR = {
				has_modifier = building_thing
				has_perm_flag = yes
			}
		}
		PREV = { change_variable = { which = var_exploitation_centers value = -1 } }
	}
}

#Planet Scope
exploit_minerals_mine_loop = {
	if = {
		limit = {
			NOT = { has_planet_flag = flg_exploit_minerals_mine_loop }
		}
		set_planet_flag = flg_exploit_minerals_mine_loop
	}
	if = {
		limit = {
			has_colony_and_space = yes
			can_build_exploit_minerals_mine = yes
		}
		add_modifier = { modifier = building_thing }
		set_planet_flag = flg_all_under_construction
		set_planet_flag = flg_exploit_building_minerals_mine
		pay_exploit_minerals_mine = yes
		planet_event = { id = spaceexploit.1 days = 91 }
		planet_event = { id = spaceexploit.102 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			can_build_exploit_power_plant = yes
			count_deposits = { type = d_energy_1 count < 1 }
			check_variable = { which = var_exploitation_size value > 1 }
		}
		pay_exploit_power_plant = yes
		planet_event = { id = spaceexploit.1 days = 91 }
		planet_event = { id = spaceexploit.202 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			check_variable = { which = var_exploitation_size value < 2 }
		}
	}
	else = {
		planet_event = { id = spaceexploit.1 days = @ConstructionTime }
	}
}

exploit_power_plant_loop = {
	if = {
		limit = {
			NOT = { has_planet_flag = flg_exploit_power_plant_loop }
		}
		set_planet_flag = flg_exploit_power_plant_loop
	}
	if = {
		limit = {
			can_build_exploit_power_plant = yes
		}
		add_modifier = { modifier = building_thing }
		set_planet_flag = flg_all_under_construction
		set_planet_flag = flg_exploit_building_power_plant
		pay_exploit_power_plant = yes
		planet_event = { id = spaceexploit.2 days = 91 }
		planet_event = { id = spaceexploit.202 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			check_variable = { which = var_exploitation_size value < 1 }
		}
	}
	else = {
		planet_event = { id = spaceexploit.2 days = @ConstructionTime }
	}		
}
exploit_alloys_mine_loop = {
	if = {
		limit = {
			NOT = { has_planet_flag = flg_exploit_alloys_mine_loop }
		}
		set_planet_flag = flg_exploit_alloys_mine_loop
	}
	if = {
		limit = {
			can_build_exploit_alloys_mine = yes
		}
		add_modifier = { modifier = building_thing }
		set_planet_flag = flg_all_under_construction
		set_planet_flag = flg_exploit_building_alloys_mine
		pay_exploit_alloys_mine = yes
		planet_event = { id = spaceexploit.5 days = 91 }
		planet_event = { id = spaceexploit.502 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			can_build_exploit_power_plant = yes
			count_deposits = { type = d_energy_1 count < 1 }
			check_variable = { which = var_exploitation_size value > 1 }
		}
		pay_exploit_power_plant = yes
		planet_event = { id = spaceexploit.5 days = 91 }
		planet_event = { id = spaceexploit.202 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			check_variable = { which = var_exploitation_size value < 2 }
		}
	}
	else = {
		planet_event = { id = spaceexploit.5 days = @ConstructionTime }
	}
}
exploit_alloys_foundry_loop = {
	if = {
		limit = {
			NOT = { has_planet_flag = flg_exploit_alloys_foundry_loop }
		}
		set_planet_flag = flg_exploit_alloys_foundry_loop
	}
	if = {
		limit = {
			can_build_exploit_alloys_foundry = yes
		}
		add_modifier = { modifier = building_thing }
		set_planet_flag = flg_all_under_construction
		set_planet_flag = flg_exploit_building_alloys_foundry
		pay_exploit_alloys_foundry = yes
		planet_event = { id = spaceexploit.4 days = 91 }
		planet_event = { id = spaceexploit.402 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			can_build_exploit_power_plant = yes
			count_deposits = { type = d_energy_1 count < 1 }
			check_variable = { which = var_exploitation_size value > 3 }
		}
		pay_exploit_power_plant = yes
		planet_event = { id = spaceexploit.4 days = 91 }
		planet_event = { id = spaceexploit.202 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			OR = {
				AND = {
					count_deposits = { type = d_minerals_1 count < 2 }
					check_variable = { which = var_exploitation_size value > 2 }
				}
				AND = {
					count_deposits = { type = d_minerals_1 count < 1 }
					check_variable = { which = var_exploitation_size value > 1 }				
				}
			}
		}
		pay_exploit_minerals_mine = yes
		planet_event = { id = spaceexploit.4 days = 91 }
		planet_event = { id = spaceexploit.102 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			check_variable = { which = var_exploitation_size value < 4 }
		}
	}
	else = {
		planet_event = { id = spaceexploit.4 days = @ConstructionTime }
	}
}
exploit_lava_refinery_loop = {
	if = {
		limit = {
			NOT = { has_planet_flag = flg_exploit_lava_refinery_loop }
		}
		set_planet_flag = flg_exploit_lava_refinery_loop
	}
	if = {
		limit = {
			can_build_exploit_lava_refinery = yes
		}
		add_modifier = { modifier = building_thing }
		set_planet_flag = flg_all_under_construction
		set_planet_flag = flg_exploit_building_lava_refinery
		pay_exploit_lava_refinery = yes
		planet_event = { id = spaceexploit.10 days = 91 }
		planet_event = { id = spaceexploit.1002 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			check_variable = { which = var_exploitation_size value < 1 }
		}
	}
	else = {
		planet_event = { id = spaceexploit.10 days = @ConstructionTime }
	}
}
exploit_research_lab_loop = {
	if = {
		limit = {
			NOT = { has_planet_flag = flg_exploit_research_lab_loop }
		}
		set_planet_flag = flg_exploit_research_lab_loop
	}
	if = {
		limit = {
			can_build_exploit_research_lab = yes
		}
		add_modifier = { modifier = building_thing }
		set_planet_flag = flg_all_under_construction
		set_planet_flag = flg_exploit_building_research_lab
		pay_exploit_research_lab = yes
		planet_event = { id = spaceexploit.12 days = 91 }
		planet_event = { id = spaceexploit.1202 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			can_build_exploit_power_plant = yes
			count_deposits = { type = d_energy_1 count < 2 }
			check_variable = { which = var_exploitation_size value > 1 }
		}
		pay_exploit_power_plant = yes
		planet_event = { id = spaceexploit.12 days = 91 }
		planet_event = { id = spaceexploit.202 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			check_variable = { which = var_exploitation_size value < 2 }
		}
	}
	else = {
		planet_event = { id = spaceexploit.12 days = @ConstructionTime }
	}
}
exploit_motes_mine_loop = {
	if = {
		limit = {
			NOT = { has_planet_flag = flg_exploit_motes_mine_loop }
		}
		set_planet_flag = flg_exploit_motes_mine_loop
	}
	if = {
		limit = {
			can_build_exploit_motes_mine = yes
		}
		add_modifier = { modifier = building_thing }
		set_planet_flag = flg_all_under_construction
		set_planet_flag = flg_exploit_building_motes_mine
		pay_exploit_motes_mine = yes
		planet_event = { id = spaceexploit.7 days = 91 }
		planet_event = { id = spaceexploit.702 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			can_build_exploit_power_plant = yes
			count_deposits = { type = d_energy_1 count < 1 }
			check_variable = { which = var_exploitation_size value > 1 }
		}
		pay_exploit_power_plant = yes
		planet_event = { id = spaceexploit.7 days = 91 }
		planet_event = { id = spaceexploit.202 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			check_variable = { which = var_exploitation_size value < 2 }
		}
	}
	else = {
		planet_event = { id = spaceexploit.7 days = @ConstructionTime }
	}
}
exploit_gases_well_loop = {
	if = {
		limit = {
			NOT = { has_planet_flag = flg_exploit_gases_well_loop }
		}
		set_planet_flag = flg_exploit_gases_well_loop
	}
	if = {
		limit = {
			can_build_exploit_gases_well = yes
		}
		add_modifier = { modifier = building_thing }
		set_planet_flag = flg_all_under_construction
		set_planet_flag = flg_exploit_building_gases_well
		pay_exploit_gases_well = yes
		planet_event = { id = spaceexploit.9 days = 91 }
		planet_event = { id = spaceexploit.902 days = @ConstructionTime }	
	}
	else_if = {
		limit = {
			can_build_exploit_power_plant = yes
			count_deposits = { type = d_energy_1 count < 1 }
			check_variable = { which = var_exploitation_size value > 1 }
		}
		pay_exploit_power_plant = yes
		planet_event = { id = spaceexploit.9 days = 91 }
		planet_event = { id = spaceexploit.202 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			check_variable = { which = var_exploitation_size value < 1 }
		}
	}
	else = {
		planet_event = { id = spaceexploit.9 days = @ConstructionTime }
	}
}
exploit_crystals_mine_loop = {
	if = {
		limit = {
			NOT = { has_planet_flag = flg_exploit_crystals_mine_loop }
		}
		set_planet_flag = flg_exploit_crystals_mine_loop
	}
	if = {
		limit = {
			can_build_exploit_crystals_mine = yes
		}
		add_modifier = { modifier = building_thing }
		set_planet_flag = flg_all_under_construction
		set_planet_flag = flg_exploit_building_crystals_mine
		pay_exploit_crystals_mine = yes
		planet_event = { id = spaceexploit.8 days = 91 }
		planet_event = { id = spaceexploit.802 days = @ConstructionTime }	
	}
	else_if = {
		limit = {
			can_build_exploit_power_plant = yes
			count_deposits = { type = d_energy_1 count < 1 }
			check_variable = { which = var_exploitation_size value > 1 }
		}
		pay_exploit_power_plant = yes
		planet_event = { id = spaceexploit.8 days = 91 }
		planet_event = { id = spaceexploit.802 days = @ConstructionTime }
	}
	else_if = {
		limit = {
			check_variable = { which = var_exploitation_size value < 1 }
		}
	}
	else = {
		planet_event = { id = spaceexploit.8 days = @ConstructionTime }
	}
}


pay_exploit_minerals_mine = {
	if = {
		limit = {
			is_base_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegBaseEnergyCost
				alloys = @NegBaseAlloyCost
				minerals = @NegBaseMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_difficult_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegDifficultEnergyCost
				alloys = @NegDifficultAlloyCost
				minerals = @NegDifficultMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_vacuum_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegVacuumEnergyCost
				alloys = @NegVacuumAlloyCost
				minerals = @NegVacuumMineralCost
			}
		}
	}
}
pay_exploit_power_plant = {
	if = {
		limit = {
			is_base_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegBaseEnergyCost
				alloys = @NegBaseAlloyCost
				minerals = @NegBaseMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_difficult_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegDifficultEnergyCost
				alloys = @NegDifficultAlloyCost
				minerals = @NegDifficultMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_vacuum_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegVacuumEnergyCost
				alloys = @NegVacuumAlloyCost
				minerals = @NegVacuumMineralCost
			}
		}
	}
}
pay_exploit_alloys_mine = {
	if = {
		limit = {
			is_base_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegBaseEnergyCost
				alloys = @NegBaseAlloyCost
				minerals = @NegBaseMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_difficult_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegDifficultEnergyCost
				alloys = @NegDifficultAlloyCost
				minerals = @NegDifficultMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_vacuum_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegVacuumEnergyCost
				alloys = @NegVacuumAlloyCost
				minerals = @NegVacuumMineralCost
			}
		}
	}
}
pay_exploit_alloys_foundry = {
	space_owner = {
		add_resource = {
			volatile_motes = @NegBaseSRCost
		}
	}
	if = {
		limit = {
			is_base_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegBaseEnergyCost
				alloys = @NegBaseAlloyCost
				minerals = @NegBaseMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_difficult_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegDifficultEnergyCost
				alloys = @NegDifficultAlloyCost
				minerals = @NegDifficultMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_vacuum_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegVacuumEnergyCost
				alloys = @NegVacuumAlloyCost
				minerals = @NegVacuumMineralCost
			}
		}
	}
}
pay_exploit_lava_refinery = {
	if = {
		limit = {
			is_base_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegAdvancedBaseEnergyCost
				alloys = @NegAdvancedBaseAlloyCost
				minerals = @NegAdvancedBaseMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_difficult_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegAdvancedDifficultEnergyCost
				alloys = @NegAdvancedDifficultAlloyCost
				minerals = @NegAdvancedDifficultMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_vacuum_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegAdvancedVacuumEnergyCost
				alloys = @NegAdvancedVacuumAlloyCost
				minerals = @NegAdvancedVacuumMineralCost
			}
		}
	}
}
pay_exploit_research_lab = {
	space_owner = {
		add_resource = {
			exotic_gases = @NegBaseSRCost
		}
	}
	if = {
		limit = {
			is_base_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegAdvancedBaseEnergyCost
				alloys = @NegAdvancedBaseAlloyCost
				minerals = @NegAdvancedBaseMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_difficult_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegAdvancedDifficultEnergyCost
				alloys = @NegAdvancedDifficultAlloyCost
				minerals = @NegAdvancedDifficultMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_vacuum_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegAdvancedVacuumEnergyCost
				alloys = @NegAdvancedVacuumAlloyCost
				minerals = @NegAdvancedVacuumMineralCost
			}
		}
	}
}
pay_exploit_motes_mine = {
	if = {
		limit = {
			is_base_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegBaseEnergyCost
				alloys = @NegBaseAlloyCost
				minerals = @NegBaseMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_difficult_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegDifficultEnergyCost
				alloys = @NegDifficultAlloyCost
				minerals = @NegDifficultMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_vacuum_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegVacuumEnergyCost
				alloys = @NegVacuumAlloyCost
				minerals = @NegVacuumMineralCost
			}
		}
	}
}
pay_exploit_gases_well = {
	if = {
		limit = {
			is_base_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegBaseEnergyCost
				alloys = @NegBaseAlloyCost
				minerals = @NegBaseMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_difficult_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegDifficultEnergyCost
				alloys = @NegDifficultAlloyCost
				minerals = @NegDifficultMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_vacuum_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegVacuumEnergyCost
				alloys = @NegVacuumAlloyCost
				minerals = @NegVacuumMineralCost
			}
		}
	}
}
pay_exploit_crystals_mine = {
	if = {
		limit = {
			is_base_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegBaseEnergyCost
				alloys = @NegBaseAlloyCost
				minerals = @NegBaseMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_difficult_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegDifficultEnergyCost
				alloys = @NegDifficultAlloyCost
				minerals = @NegDifficultMineralCost
			}
		}
	}
	else_if = {
		limit = {
			is_vacuum_planet = yes
		}
		space_owner = {
			add_resource = {
				energy = @NegVacuumEnergyCost
				alloys = @NegVacuumAlloyCost
				minerals = @NegVacuumMineralCost
			}
		}
	}
}

build_exploit_minerals_mine = {
	log = "Building Minerals mine"
	add_deposit = d_minerals_1
	add_deposit = d_minerals_1
	remove_deposit = d_energy_1
	remove_modifier = building_thing
	remove_planet_flag = flg_exploit_building_minerals_mine
	if = {
		limit = {
			OR = {
				is_planet_class = pc_ice_asteroid
				is_planet_class = pc_asteroid
				is_planet_class = pc_rare_crystal_asteroid
			}
		}
		add_deposit = d_minerals_1
		add_deposit = d_minerals_1
	}
	if = {
		limit = {
			is_planet_class = pc_molten
		}
		add_deposit = d_minerals_1
	}
	if = {
		limit = {
			is_inside_nebula = yes
		}
		add_deposit = d_minerals_1
	}
	ROOT = { change_variable = { which = var_exploitation_size value = -1 } }
}
build_exploit_power_plant = {
	log = "Building Power Plant"
	add_deposit = d_energy_1
	add_deposit = d_energy_1
	remove_modifier = building_thing
	remove_planet_flag = flg_exploit_building_power_plant
	if = {
		limit = {
			is_planet_class = pc_gas_giant
		}
		add_deposit = d_energy_1
	}
	if = {
		limit = {
			is_planet_class = pc_molten
		}
		add_deposit = d_energy_1
	}
	ROOT = { change_variable = { which = var_exploitation_size value = -1 } }
}
build_exploit_alloys_mine = {
	log = "Building Alloys mine"
	add_deposit = d_alloys_1
	remove_deposit = d_energy_1
	remove_modifier = building_thing
	remove_planet_flag = flg_exploit_building_alloys_mine
	ROOT = { change_variable = { which = var_exploitation_size value = -1 } }
}
build_exploit_alloys_foundry = {
	log = "Building Alloys Foundry"
	add_deposit = d_alloys_1
	remove_deposit = d_energy_1
	remove_deposit = d_minerals_1
	remove_deposit = d_minerals_1
	remove_modifier = building_thing
	remove_planet_flag = flg_exploit_building_alloys_foundry
	ROOT = { change_variable = { which = var_exploitation_size value = -1 } }
}
build_exploit_lava_refinery = {
	log = "Building Lava Refinery"
	add_deposit = d_minerals_1
	add_deposit = d_minerals_1
	add_deposit = d_energy_1
	remove_modifier = building_thing
	remove_planet_flag = flg_exploit_building_lava_refinery
	random_list = {
		3 = {
			add_deposit = d_alloys_1
		}
		1 = { }
	}
	ROOT = { change_variable = { which = var_exploitation_size value = -1 } }
}
build_exploit_research_lab = {
	log = "Building Research Lab"
	add_deposit = d_society_1
	add_deposit = d_physics_1
	add_deposit = d_engineering_1
	remove_deposit = d_energy_1
	remove_deposit = d_energy_1
	remove_modifier = building_thing
	remove_planet_flag = flg_exploit_building_research_lab
	if = {
		limit = {
			OR = {
				is_planet_class = pc_gas_giant
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
			}
		}
		add_deposit = d_physics_1
	}
	if = {
		limit = {
			OR = {
				is_planet_class = pc_molten
				is_planet_class = pc_frozen
			}
		}
		add_deposit = d_engineering_1 
	}
	if = {
		limit = {
			is_planet_class = pc_toxic
		}
		add_deposit = d_society_1 
	}
	ROOT = { change_variable = { which = var_exploitation_size value = -1 } }
}
build_exploit_motes_mine = {
	log = "Building Motes mine"
	add_deposit = d_volatile_motes_1
	remove_deposit = d_energy_1
	remove_deposit = d_energy_1
	remove_modifier = building_thing
	remove_planet_flag = flg_exploit_building_motes_mine
	ROOT = { change_variable = { which = var_exploitation_size value = -1 } }
}
build_exploit_gases_well = {
	log = "Building Gases Well"
	add_deposit = d_exotic_gases_1
	remove_deposit = d_energy_1
	remove_deposit = d_energy_1
	remove_modifier = building_thing 
	remove_planet_flag = flg_exploit_building_gases_well
	ROOT = { change_variable = { which = var_exploitation_size value = -1 } }
}
build_exploit_crystals_mine = {
	log = "Building Crystal mine"
	add_deposit = d_rare_crystals_1
	remove_deposit = d_energy_1
	remove_deposit = d_energy_1
	remove_modifier = building_thing
	remove_planet_flag = flg_exploit_building_crystals_mine
	ROOT = { change_variable = { which = var_exploitation_size value = -1 } }
}

set_AI_queue = {
	if = {
		limit = {
			exists = space_owner
			space_owner = {
				resource_income_compare = {
					resource = energy
					value < 50
				}
			}
		}
		#log = "AI Check : Energy needed."
		if  = {
			limit = {
				check_variable = { which = var_exploit_power_plant_queue value = 0 }
				check_variable = { which = var_exploit_power_plant_building value = 0 }
			}
			log = "AI Check : Energy needed, no building or queue. Adding power plant in queue"
			#check_variable = { which = var_exploit_power_plant_available value > 0 }
			change_variable = { which = var_exploit_power_plant_queue value = 1 }
		}
		else
		{
			#log = "AI Check : Energy needed, already building or queue."		
		}		
	}
	else_if = {
		limit = {
			exists = space_owner
			space_owner = {
				resource_income_compare = {
					resource = minerals
					value < 50
				}
			}
		}
		#log = "AI Check : minerals needed."
		if  = {
			limit = {
				check_variable = { which = var_exploit_minerals_mine_queue value = 0 }
				check_variable = { which = var_exploit_minerals_mine_building value = 0 }
			}
			log = "AI Check : minerals needed, no building or queue. Adding minerals_mine in queue"
			#check_variable = { which = var_exploit_minerals_mine_available value > 0 }
			change_variable = { which = var_exploit_minerals_mine_queue value = 1 }
		}
		else
		{
			#log = "AI Check : minerals needed, already building or queue."		
		}
		
	}	
	else_if = {
		limit = {
			exists = space_owner
			space_owner = {
				resource_income_compare = {
					resource = alloys
					value < 30 #50
				}
			}
		}
		#log = "AI Check : Alloys needed."
		if  = {
			limit = {
				check_variable = { which = var_exploit_alloys_mine_queue value = 0 }
				check_variable = { which = var_exploit_alloys_mine_building value = 0 }
			}
			log = "AI Check : Alloys needed, no building or queue. Adding alloys_mine in queue"
			#check_variable = { which = var_exploit_alloys_mine_available value > 0 }
			change_variable = { which = var_exploit_alloys_mine_queue value = 1 }
		}
		else
		{
			#log = "AI Check : Alloys needed, already building or queue."		
		}
	}
	else_if = {
		limit = {
			exists = space_owner
			space_owner = {
				has_technology = tech_mine_volatile_motes
				resource_income_compare = {
					resource = volatile_motes
					value < 10
				}
			}
		}
		#log = "AI Check : volatile_motes needed."
		if  = {
			limit = {
				check_variable = { which = var_exploit_motes_mine_queue value = 0 }
				check_variable = { which = var_exploit_motes_mine_building value = 0 }
			}
			log = "AI Check : minerals needed, no building or queue. Adding minerals_mine in queue"
			#check_variable = { which = var_exploit_motes_mine_available value > 0 }
			change_variable = { which = var_exploit_motes_mine_queue value = 1 }
		}
		else
		{
			#log = "AI Check : volatile_motes needed, already building or queue."		
		}		
	}	
	else_if = {
		limit = {
			exists = space_owner
			space_owner = {
				has_technology = tech_mine_exotic_gases
				resource_income_compare = {
					resource = exotic_gases
					value < 10
				}
			}
		}
		#log = "AI Check : exotic_gases needed."
		if  = {
			limit = {
				check_variable = { which = var_exploit_gases_well_queue value = 0 }
				check_variable = { which = var_exploit_gases_well_building value = 0 }
			}
			log = "AI Check : minerals needed, no building or queue. Adding minerals_mine in queue"
			#check_variable = { which = var_exploit_gases_well_available value > 0 }
			change_variable = { which = var_exploit_gases_well_queue value = 1 }
		}
		else
		{
			#log = "AI Check : exotic_gases needed, already building or queue."		
		}
		
	}
	else_if = {
		limit = {
			exists = space_owner
			space_owner = {
				has_technology = tech_mine_rare_crystals
				resource_income_compare = {
					resource = rare_crystals
					value < 10
				}
			}
		}
		#log = "AI Check : rare_crystals needed."
		if  = {
			limit = {
				check_variable = { which = var_exploit_crystals_mine_queue value = 0 }
				check_variable = { which = var_exploit_crystals_mine_building value = 0 }
			}
			log = "AI Check : rare_crystals needed, no building or queue. Adding crystals_mine in queue"
			#check_variable = { which = var_exploit_crystals_mine_available value > 0 }
			change_variable = { which = var_exploit_crystals_mine_queue value = 1 }
		}
		else
		{
			#log = "AI Check : rare_crystals needed, already building or queue."		
		}
		
	}
	#else = {
		#log = "AI Check : No Ressources needed"		
	#}
}
