reset_automation_cycle = {
	set_variable = { which = var_exploit_done_today value = 0 }
	set_variable = { which = var_exploit_done_cycle value = 0 }
	every_owned_planet = {
		#remove_planet_flag = automation_queued_this_cycle
	}
}

exploit_floor_stockpile_variables = {
	if = {
		limit = {
			check_variable = { which = var_exploit_energy_stockpile_min value < 0 }
		}
		set_variable = { which = var_exploit_energy_stockpile_min value = 0 }
	}
	if = {
		limit = {
			check_variable = { which = var_exploit_minerals_stockpile_min value < 0 }
		}
		set_variable = { which = var_exploit_minerals_stockpile_min value = 0 }
	}
	if = {
		limit = {
			check_variable = { which = var_exploit_alloys_stockpile_min value < 0 }
		}
		set_variable = { which = var_exploit_alloys_stockpile_min value = 0 }
	}
	if = {
		limit = {
			check_variable = { which = var_exploit_motes_stockpile_min value < 0 }
		}
		set_variable = { which = var_exploit_motes_stockpile_min value = 0 }
	}
	if = {
		limit = {
			check_variable = { which = var_exploit_gases_stockpile_min value < 0 }
		}
		set_variable = { which = var_exploit_gases_stockpile_min value = 0 }
	}
}

automation_variables_calc = {
	subtract_variable = { which = var_exploit_energy_tracking value = var_exploit_energy_stockpile_min }
	subtract_variable = { which = var_exploit_minerals_tracking value = var_exploit_minerals_stockpile_min }
	subtract_variable = { which = var_exploit_alloys_tracking value = var_exploit_alloys_stockpile_min }
	subtract_variable = { which = var_exploit_volatile_motes_tracking value = var_exploit_motes_stockpile_min }
	subtract_variable = { which = var_exploit_exotic_gases_tracking value = var_exploit_gases_stockpile_min }
}

export_to_exploit_variables = {
	set_variable = { which = var_exploit_energy_tracking value = 0 }
	set_variable = { which = var_exploit_minerals_tracking value = 0 }
	set_variable = { which = var_exploit_alloys_tracking value = 0 }
	set_variable = { which = var_exploit_volatile_motes_tracking value = 0 }
	set_variable = { which = var_exploit_exotic_gases_tracking value = 0 }
	
	export_resource_stockpile_to_variable = { resource = energy variable = var_exploit_energy_tracking }
	export_resource_stockpile_to_variable = { resource = minerals variable = var_exploit_minerals_tracking }
	export_resource_stockpile_to_variable = { resource = alloys variable = var_exploit_alloys_tracking }
	export_resource_stockpile_to_variable = { resource = volatile_motes variable = var_exploit_volatile_motes_tracking }
	export_resource_stockpile_to_variable = { resource = exotic_gases variable = var_exploit_exotic_gases_tracking }
}