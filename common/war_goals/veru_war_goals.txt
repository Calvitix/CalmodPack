# Vassals Expanded and Reworked mod
#
# last update 25.02.2022
#
#
wg_claim_subject = {
	casus_belli = cb_buffer_zone

	hide_if_no_cb = yes

	allowed_peace_offers = {
		status_quo
		surrender
		demand_surrender
	}

	surrender_acceptance = -150

	potential = {
		has_total_war_cb = no
	}

	possible = {
		always = yes
	}

	on_status_quo = {
		custom_tooltip = wg_independence_status_quo
		hidden_effect = {
			save_global_event_target_as = buffer_zone_loser
			from = {
				country_event = { id = veru.6210 days = 1 }
			}
		}
	}

	on_accept = {
		custom_tooltip = chosen_subject_text
		hidden_effect = {
			save_global_event_target_as = buffer_zone_winner
			from = {
				country_event = { id = veru.6200 days = 1 }
			}
		}
	}

	on_surrender = {
		random_subject = {
			limit = {
				has_country_flag = chosen_border_subject@event_target:buffer_zone_winner
			}
			remove_country_flag = chosen_border_subject@event_target:buffer_zone_winner
			set_subject_of = {
				who = event_target:buffer_zone_winner
				preset = preset_vassal
			}
		}
	}

	on_wargoal_set = {
		save_event_target_as = buffer_zone_mother
		if = {
			limit = { 
				NOT = { exists = event_target:chosen_border_subject }
			}
			from = {
				country_event = { id = veru.6000 }
			}
		}
	}

	ai_weight = {
		weight = 100
	}
}
