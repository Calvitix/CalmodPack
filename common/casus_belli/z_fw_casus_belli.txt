# TEST #Calvitix


z_fw_cb_demilitarize = {
	show_in_diplomacy = yes
	show_notification = no
	potential = {
		has_global_flag = z_framework_core	#_z fw
		OR = {
			is_country_type = default
			#is_country_type = ascended_empire	#TODO_renabled #calvitix
			#is_country_type = lost_empire		#TODO_renabled #calvitix
		}
        is_pacifist = yes
	}
	is_valid = {
		has_global_flag = z_framework_core	#_z fw
        from = {
			OR = {
			is_country_type = default			
			#is_country_type = ascended_empire	#TODO_renabled #calvitix
			#is_country_type = lost_empire		#TODO_renabled #calvitix
			}
		}
		has_total_war_cb = no
		NOT = { is_overlord_to = FROM }
		OR = {
            is_subject = no
            overlord = { NOT = { is_same_value = from } }
        }
	}
}

#plunder_relic
z_fw_cb_plunder_relic = {
    show_in_diplomacy = yes
    show_notification = no
    potential = {
		has_global_flag = z_framework_core	#_z fw
		#host_has_dlc = "Ancient Relics Story Pack"
		OR = {
			is_country_type = default
			#is_country_type = ascended_empire	#_ZOFE
		}
        is_subject = no							
        #NOT = { has_ethic = ethic_gestalt_consciousness }
    }
    is_valid = {
		has_global_flag = z_framework_core	#_z fw
        from = {
			#Check
			OR = {
				has_relic = r_dragon_trophy
				has_relic = r_khans_throne
				has_relic = r_worm_scales
				has_relic = r_rubricator
				has_relic = r_galaxy
				has_relic = r_omnicodex
				has_relic = r_surveyor
				has_relic = r_galatron
				has_relic = r_ancient_sword
				has_relic = r_severed_head
				has_relic = r_prethoryn_queen
				has_relic = r_unbidden_warlock
				has_relic = r_contingency_core
				has_relic = r_zro_crystal
				has_relic = r_the_last_baol
				has_relic = r_the_defragmentor
				has_relic = r_reality_perforator
				has_relic = r_pox_sample
				has_relic = r_cryo_core
				has_relic = r_war_forge
			}
				
			#has_closed_borders = prev
        }
        #has_total_war_cb = no
        NOT = { is_overlord_to = FROM }			#Check
    }
}

#Relic_all
z_fw_cb_plunder_relic_all = {
    show_in_diplomacy = yes
    show_notification = no
    potential = {
		has_global_flag = z_framework_core	#_z fw
		OR = {
			is_country_type = default
			#is_country_type = ascended_empire	#_ZOFE
		}
        is_subject = no
    }
    is_valid = {
		has_global_flag = z_framework_core	#_z fw
        from = {
			#Check
			calc_true_if = {
				amount > 2
				has_relic = r_dragon_trophy
				has_relic = r_khans_throne
				has_relic = r_worm_scales
				has_relic = r_rubricator
				has_relic = r_galaxy
				has_relic = r_omnicodex
				has_relic = r_surveyor
				has_relic = r_galatron
				has_relic = r_ancient_sword
				has_relic = r_severed_head
				has_relic = r_prethoryn_queen
				has_relic = r_unbidden_warlock
				has_relic = r_contingency_core
				has_relic = r_zro_crystal
				has_relic = r_the_last_baol
				has_relic = r_the_defragmentor
				has_relic = r_reality_perforator
				has_relic = r_pox_sample
				has_relic = r_cryo_core
				has_relic = r_war_forge
			}
        }
        NOT = { is_overlord_to = FROM }			#Check
    }
}

#CB_Close_Border
z_fw_cb_border = {
	show_in_diplomacy = yes
	show_notification = no
	potential = {
		has_global_flag = z_framework_core	#_z fw
		OR = {
			is_country_type = default
			#is_country_type = ascended_empire	#_ZOFE
			#is_country_type = lost_empire		#_ZOFE
		}
	}
	is_valid = {
		has_global_flag = z_framework_core	#_z fw
        from = {
			OR = {
				is_country_type = default
				#is_country_type = ascended_empire	#_ZOFE
				#is_country_type = lost_empire		#_ZOFE	
			}
			has_closed_borders = root		
		}
		NOT = { is_overlord_to = FROM }
		OR = {
            is_subject = no
            overlord = { NOT = { is_same_value = from } }
        }
	}
}